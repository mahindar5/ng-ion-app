import{B as xi,E as Di,H as Ii,J as Ei,R as Oi,Y as at,_ as Ri,a as q,b as Ci,fa as Li,ha as Fi,p as vi,q as wi,r as ki,s as Mi,t as Pi,u as Ti,w as ie,y as bi}from"./chunk-CSTODAPL.js";import{a as ue,d as ei,e as ti,f as je,h as ii,i as tt,k as it,o as ni,p as ye,q as oi,r as Ue,s as ri,t as $e,u as Se,v as li,w as ai,x as y}from"./chunk-Z5VNCUFL.js";import{B as ci,C as $,D as G,J as Ce,K as Y,L as J,N as H,O as nt,P as B,Q as De,R as ve,S as di,T as pi,U as mi,V as ot,W as X,Y as ui,aa as hi,b as Yt,ba as fi,ca as we,d as Jt,da as ke,f as Xt,ha as rt,ia as ee,ja as K,ka as te,m as A,ma as gi,na as _i,oa as lt,p as z,qa as le,ra as Z,sa as he,t as W,u as si,ua as yi,va as ae,xa as Si}from"./chunk-DG4AZ3SZ.js";import{$a as P,A as Ct,Aa as s,Ab as v,B as Fe,Bb as N,Ca as Et,Da as Xe,Ea as Ae,Eb as L,Fb as F,G as vt,Ga as ze,Gb as V,H as wt,Ja as x,Kb as jt,L as kt,La as pe,N as Mt,Na as et,Nb as re,O as Je,Oa as Ot,P as Pt,Q as Ve,Qa as oe,Qb as Ut,Ra as me,Rb as $t,Sa as Rt,Sb as Gt,U as Tt,V as Q,Y as de,Zb as We,_ as m,_a as M,a as gt,bb as D,bc as O,c as Qe,cb as I,cc as Ht,da as w,db as E,dc as Kt,e as _t,ea as k,eb as f,f as R,fa as Be,fb as l,fc as Zt,ga as Ne,gb as a,gc as qt,h as yt,hb as S,i as St,jc as Qt,ka as C,kb as T,l as ge,m as Ye,ma as bt,na as xt,nb as p,o as be,oa as Dt,ob as _,pb as Lt,q as Le,qb as Ft,ra as xe,rb as Vt,sb as Bt,tb as Nt,ub as At,va as It,vb as zt,xb as Wt,yb as _e,zb as d}from"./chunk-K2KEBQBS.js";import"./chunk-UWWRSBJN.js";import"./chunk-GJA76NSQ.js";import"./chunk-SL7YA7MF.js";import"./chunk-5UTXTVDX.js";import"./chunk-K37BZDXQ.js";import"./chunk-CASY3UTO.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-2YSZFPCQ.js";import"./chunk-57YRIO75.js";import"./chunk-JR2FMVVP.js";import"./chunk-C5RQ2IC2.js";import"./chunk-42C7ZIID.js";import{a as ne,b as ce}from"./chunk-3GJFFWBB.js";function Ie(n,c=0){return en(n)?Number(n):arguments.length===2?c:0}function en(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}function Vi(n){return n instanceof xe?n.nativeElement:n}var st;try{st=typeof Intl<"u"&&Intl.v8BreakIterator}catch{st=!1}var Ge=(()=>{class n{_platformId=m(It);isBrowser=this._platformId?Jt(this._platformId):typeof document=="object"&&!!document;EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent);TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent);BLINK=this.isBrowser&&!!(window.chrome||st)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT;WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT;IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window);FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent);ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT;SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT;constructor(){}static \u0275fac=function(t){return new(t||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var tn=new de("cdk-dir-doc",{providedIn:"root",factory:nn});function nn(){return m(Ne)}var on=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function rn(n){let c=n?.toLowerCase()||"";return c==="auto"&&typeof navigator<"u"&&navigator?.language?on.test(navigator.language)?"rtl":"ltr":c==="rtl"?"rtl":"ltr"}var Bi=(()=>{class n{get value(){return this.valueSignal()}valueSignal=C("ltr");change=new oe;constructor(){let e=m(tn,{optional:!0});if(e){let t=e.body?e.body.dir:null,i=e.documentElement?e.documentElement.dir:null;this.valueSignal.set(rn(t||i||"ltr"))}}ngOnDestroy(){this.change.complete()}static \u0275fac=function(t){return new(t||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var j=function(n){return n[n.NORMAL=0]="NORMAL",n[n.NEGATED=1]="NEGATED",n[n.INVERTED=2]="INVERTED",n}(j||{}),He,fe;function Ni(){if(fe==null){if(typeof document!="object"||!document||typeof Element!="function"||!Element)return fe=!1,fe;if("scrollBehavior"in document.documentElement.style)fe=!0;else{let n=Element.prototype.scrollTo;n?fe=!/\{\s*\[native code\]\s*\}/.test(n.toString()):fe=!1}}return fe}function Me(){if(typeof document!="object"||!document)return j.NORMAL;if(He==null){let n=document.createElement("div"),c=n.style;n.dir="rtl",c.width="1px",c.overflow="auto",c.visibility="hidden",c.pointerEvents="none",c.position="absolute";let e=document.createElement("div"),t=e.style;t.width="2px",t.height="1px",n.appendChild(e),document.body.appendChild(n),He=j.NORMAL,n.scrollLeft===0&&(n.scrollLeft=1,He=n.scrollLeft===0?j.NEGATED:j.INVERTED),n.remove()}return He}var Ke=class{};function Ai(n){return n&&typeof n.connect=="function"&&!(n instanceof _t)}var Ze=class extends Ke{_data;constructor(c){super(),this._data=c}connect(){return Le(this._data)?this._data:be(this._data)}disconnect(){}},Oe=function(n){return n[n.REPLACED=0]="REPLACED",n[n.INSERTED=1]="INSERTED",n[n.MOVED=2]="MOVED",n[n.REMOVED=3]="REMOVED",n}(Oe||{}),ct=new de("_ViewRepeater"),qe=class{viewCacheSize=20;_viewCache=[];applyChanges(c,e,t,i,o){c.forEachOperation((r,h,u)=>{let g,b;if(r.previousIndex==null){let U=()=>t(r,h,u);g=this._insertView(U,u,e,i(r)),b=g?Oe.INSERTED:Oe.REPLACED}else u==null?(this._detachAndCacheView(h,e),b=Oe.REMOVED):(g=this._moveView(h,u,e,i(r)),b=Oe.MOVED);o&&o({context:g?.context,operation:b,record:r})})}detach(){for(let c of this._viewCache)c.destroy();this._viewCache=[]}_insertView(c,e,t,i){let o=this._insertViewFromCache(e,t);if(o){o.context.$implicit=i;return}let r=c();return t.createEmbeddedView(r.templateRef,r.context,r.index)}_detachAndCacheView(c,e){let t=e.detach(c);this._maybeCacheView(t,e)}_moveView(c,e,t,i){let o=t.get(c);return t.move(o,e),o.context.$implicit=i,o}_maybeCacheView(c,e){if(this._viewCache.length<this.viewCacheSize)this._viewCache.push(c);else{let t=e.indexOf(c);t===-1?c.destroy():e.remove(t)}}_insertViewFromCache(c,e){let t=this._viewCache.pop();return t&&e.insert(t,c),t||null}};var ln=["contentWrapper"],an=["*"],ji=new de("VIRTUAL_SCROLL_STRATEGY"),dt=class{_scrolledIndexChange=new R;scrolledIndexChange=this._scrolledIndexChange.pipe(vt());_viewport=null;_itemSize;_minBufferPx;_maxBufferPx;constructor(c,e,t){this._itemSize=c,this._minBufferPx=e,this._maxBufferPx=t}attach(c){this._viewport=c,this._updateTotalContentSize(),this._updateRenderedRange()}detach(){this._scrolledIndexChange.complete(),this._viewport=null}updateItemAndBufferSize(c,e,t){t<e,this._itemSize=c,this._minBufferPx=e,this._maxBufferPx=t,this._updateTotalContentSize(),this._updateRenderedRange()}onContentScrolled(){this._updateRenderedRange()}onDataLengthChanged(){this._updateTotalContentSize(),this._updateRenderedRange()}onContentRendered(){}onRenderedOffsetChanged(){}scrollToIndex(c,e){this._viewport&&this._viewport.scrollToOffset(c*this._itemSize,e)}_updateTotalContentSize(){this._viewport&&this._viewport.setTotalContentSize(this._viewport.getDataLength()*this._itemSize)}_updateRenderedRange(){if(!this._viewport)return;let c=this._viewport.getRenderedRange(),e={start:c.start,end:c.end},t=this._viewport.getViewportSize(),i=this._viewport.getDataLength(),o=this._viewport.measureScrollOffset(),r=this._itemSize>0?o/this._itemSize:0;if(e.end>i){let u=Math.ceil(t/this._itemSize),g=Math.max(0,Math.min(r,i-u));r!=g&&(r=g,o=g*this._itemSize,e.start=Math.floor(r)),e.end=Math.max(0,Math.min(i,e.start+u))}let h=o-e.start*this._itemSize;if(h<this._minBufferPx&&e.start!=0){let u=Math.ceil((this._maxBufferPx-h)/this._itemSize);e.start=Math.max(0,e.start-u),e.end=Math.min(i,Math.ceil(r+(t+this._minBufferPx)/this._itemSize))}else{let u=e.end*this._itemSize-(o+t);if(u<this._minBufferPx&&e.end!=i){let g=Math.ceil((this._maxBufferPx-u)/this._itemSize);g>0&&(e.end=Math.min(i,e.end+g),e.start=Math.max(0,Math.floor(r-this._minBufferPx/this._itemSize)))}}this._viewport.setRenderedRange(e),this._viewport.setRenderedContentOffset(this._itemSize*e.start),this._scrolledIndexChange.next(Math.floor(r))}};function sn(n){return n._scrollStrategy}var Ui=(()=>{class n{get itemSize(){return this._itemSize}set itemSize(e){this._itemSize=Ie(e)}_itemSize=20;get minBufferPx(){return this._minBufferPx}set minBufferPx(e){this._minBufferPx=Ie(e)}_minBufferPx=100;get maxBufferPx(){return this._maxBufferPx}set maxBufferPx(e){this._maxBufferPx=Ie(e)}_maxBufferPx=200;_scrollStrategy=new dt(this.itemSize,this.minBufferPx,this.maxBufferPx);ngOnChanges(){this._scrollStrategy.updateItemAndBufferSize(this.itemSize,this.minBufferPx,this.maxBufferPx)}static \u0275fac=function(t){return new(t||n)};static \u0275dir=pe({type:n,selectors:[["cdk-virtual-scroll-viewport","itemSize",""]],inputs:{itemSize:"itemSize",minBufferPx:"minBufferPx",maxBufferPx:"maxBufferPx"},features:[re([{provide:ji,useFactory:sn,deps:[Tt(()=>n)]}]),Dt]})}return n})(),cn=20,dn=(()=>{class n{_ngZone=m(me);_platform=m(Ge);_renderer=m(Xe).createRenderer(null,null);_cleanupGlobalListener;constructor(){}_scrolled=new R;_scrolledCount=0;scrollContainers=new Map;register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){let t=this.scrollContainers.get(e);t&&(t.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=cn){return this._platform.isBrowser?new Qe(t=>{this._cleanupGlobalListener||(this._cleanupGlobalListener=this._ngZone.runOutsideAngular(()=>this._renderer.listen("document","scroll",()=>this._scrolled.next())));let i=e>0?this._scrolled.pipe(Fe(e)).subscribe(t):this._scrolled.subscribe(t);return this._scrolledCount++,()=>{i.unsubscribe(),this._scrolledCount--,this._scrolledCount||(this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0)}}):be()}ngOnDestroy(){this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0,this.scrollContainers.forEach((e,t)=>this.deregister(t)),this._scrolled.complete()}ancestorScrolled(e,t){let i=this.getAncestorScrollContainers(e);return this.scrolled(t).pipe(Ct(o=>!o||i.indexOf(o)>-1))}getAncestorScrollContainers(e){let t=[];return this.scrollContainers.forEach((i,o)=>{this._scrollableContainsElement(o,e)&&t.push(o)}),t}_scrollableContainsElement(e,t){let i=Vi(t),o=e.getElementRef().nativeElement;do if(i==o)return!0;while(i=i.parentElement);return!1}static \u0275fac=function(t){return new(t||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),$i=(()=>{class n{elementRef=m(xe);scrollDispatcher=m(dn);ngZone=m(me);dir=m(Bi,{optional:!0});_scrollElement=this.elementRef.nativeElement;_destroyed=new R;_renderer=m(Ae);_cleanupScroll;_elementScrolled=new R;constructor(){}ngOnInit(){this._cleanupScroll=this.ngZone.runOutsideAngular(()=>this._renderer.listen(this._scrollElement,"scroll",e=>this._elementScrolled.next(e))),this.scrollDispatcher.register(this)}ngOnDestroy(){this._cleanupScroll?.(),this._elementScrolled.complete(),this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(e){let t=this.elementRef.nativeElement,i=this.dir&&this.dir.value=="rtl";e.left==null&&(e.left=i?e.end:e.start),e.right==null&&(e.right=i?e.start:e.end),e.bottom!=null&&(e.top=t.scrollHeight-t.clientHeight-e.bottom),i&&Me()!=j.NORMAL?(e.left!=null&&(e.right=t.scrollWidth-t.clientWidth-e.left),Me()==j.INVERTED?e.left=e.right:Me()==j.NEGATED&&(e.left=e.right?-e.right:e.right)):e.right!=null&&(e.left=t.scrollWidth-t.clientWidth-e.right),this._applyScrollToOptions(e)}_applyScrollToOptions(e){let t=this.elementRef.nativeElement;Ni()?t.scrollTo(e):(e.top!=null&&(t.scrollTop=e.top),e.left!=null&&(t.scrollLeft=e.left))}measureScrollOffset(e){let t="left",i="right",o=this.elementRef.nativeElement;if(e=="top")return o.scrollTop;if(e=="bottom")return o.scrollHeight-o.clientHeight-o.scrollTop;let r=this.dir&&this.dir.value=="rtl";return e=="start"?e=r?i:t:e=="end"&&(e=r?t:i),r&&Me()==j.INVERTED?e==t?o.scrollWidth-o.clientWidth-o.scrollLeft:o.scrollLeft:r&&Me()==j.NEGATED?e==t?o.scrollLeft+o.scrollWidth-o.clientWidth:-o.scrollLeft:e==t?o.scrollLeft:o.scrollWidth-o.clientWidth-o.scrollLeft}static \u0275fac=function(t){return new(t||n)};static \u0275dir=pe({type:n,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]]})}return n})(),pn=20,mn=(()=>{class n{_platform=m(Ge);_listeners;_viewportSize;_change=new R;_document=m(Ne,{optional:!0});constructor(){let e=m(me),t=m(Xe).createRenderer(null,null);e.runOutsideAngular(()=>{if(this._platform.isBrowser){let i=o=>this._change.next(o);this._listeners=[t.listen("window","resize",i),t.listen("window","orientationchange",i)]}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){this._listeners?.forEach(e=>e()),this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){let e=this.getViewportScrollPosition(),{width:t,height:i}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+i,right:e.left+t,height:i,width:t}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let e=this._document,t=this._getWindow(),i=e.documentElement,o=i.getBoundingClientRect(),r=-o.top||e.body.scrollTop||t.scrollY||i.scrollTop||0,h=-o.left||e.body.scrollLeft||t.scrollX||i.scrollLeft||0;return{top:r,left:h}}change(e=pn){return e>0?this._change.pipe(Fe(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}static \u0275fac=function(t){return new(t||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),zi=new de("VIRTUAL_SCROLLABLE"),un=(()=>{class n extends $i{constructor(){super()}measureViewportSize(e){let t=this.elementRef.nativeElement;return e==="horizontal"?t.clientWidth:t.clientHeight}static \u0275fac=function(t){return new(t||n)};static \u0275dir=pe({type:n,features:[et]})}return n})();function hn(n,c){return n.start==c.start&&n.end==c.end}var fn=typeof requestAnimationFrame<"u"?St:yt,pt=(()=>{class n extends un{elementRef=m(xe);_changeDetectorRef=m(Zt);_scrollStrategy=m(ji,{optional:!0});scrollable=m(zi,{optional:!0});_platform=m(Ge);_detachedSubject=new R;_renderedRangeSubject=new R;get orientation(){return this._orientation}set orientation(e){this._orientation!==e&&(this._orientation=e,this._calculateSpacerSize())}_orientation="vertical";appendOnly=!1;scrolledIndexChange=new Qe(e=>this._scrollStrategy.scrolledIndexChange.subscribe(t=>Promise.resolve().then(()=>this.ngZone.run(()=>e.next(t)))));_contentWrapper;renderedRangeStream=this._renderedRangeSubject;_totalContentSize=0;_totalContentWidth=C("");_totalContentHeight=C("");_renderedContentTransform;_renderedRange={start:0,end:0};_dataLength=0;_viewportSize=0;_forOf;_renderedContentOffset=0;_renderedContentOffsetNeedsRewrite=!1;_isChangeDetectionPending=!1;_runAfterChangeDetection=[];_viewportChanges=gt.EMPTY;_injector=m(Be);_isDestroyed=!1;constructor(){super();let e=m(mn);this._scrollStrategy,this._viewportChanges=e.change().subscribe(()=>{this.checkViewportSize()}),this.scrollable||(this.elementRef.nativeElement.classList.add("cdk-virtual-scrollable"),this.scrollable=this)}ngOnInit(){this._platform.isBrowser&&(this.scrollable===this&&super.ngOnInit(),this.ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>{this._measureViewportSize(),this._scrollStrategy.attach(this),this.scrollable.elementScrolled().pipe(Je(null),Fe(0,fn),Ve(this._destroyed)).subscribe(()=>this._scrollStrategy.onContentScrolled()),this._markChangeDetectionNeeded()})))}ngOnDestroy(){this.detach(),this._scrollStrategy.detach(),this._renderedRangeSubject.complete(),this._detachedSubject.complete(),this._viewportChanges.unsubscribe(),this._isDestroyed=!0,super.ngOnDestroy()}attach(e){this._forOf,this.ngZone.runOutsideAngular(()=>{this._forOf=e,this._forOf.dataStream.pipe(Ve(this._detachedSubject)).subscribe(t=>{let i=t.length;i!==this._dataLength&&(this._dataLength=i,this._scrollStrategy.onDataLengthChanged()),this._doChangeDetection()})})}detach(){this._forOf=null,this._detachedSubject.next()}getDataLength(){return this._dataLength}getViewportSize(){return this._viewportSize}getRenderedRange(){return this._renderedRange}measureBoundingClientRectWithScrollOffset(e){return this.getElementRef().nativeElement.getBoundingClientRect()[e]}setTotalContentSize(e){this._totalContentSize!==e&&(this._totalContentSize=e,this._calculateSpacerSize(),this._markChangeDetectionNeeded())}setRenderedRange(e){hn(this._renderedRange,e)||(this.appendOnly&&(e={start:0,end:Math.max(this._renderedRange.end,e.end)}),this._renderedRangeSubject.next(this._renderedRange=e),this._markChangeDetectionNeeded(()=>this._scrollStrategy.onContentRendered()))}getOffsetToRenderedContentStart(){return this._renderedContentOffsetNeedsRewrite?null:this._renderedContentOffset}setRenderedContentOffset(e,t="to-start"){e=this.appendOnly&&t==="to-start"?0:e;let i=this.dir&&this.dir.value=="rtl",o=this.orientation=="horizontal",r=o?"X":"Y",u=`translate${r}(${Number((o&&i?-1:1)*e)}px)`;this._renderedContentOffset=e,t==="to-end"&&(u+=` translate${r}(-100%)`,this._renderedContentOffsetNeedsRewrite=!0),this._renderedContentTransform!=u&&(this._renderedContentTransform=u,this._markChangeDetectionNeeded(()=>{this._renderedContentOffsetNeedsRewrite?(this._renderedContentOffset-=this.measureRenderedContentSize(),this._renderedContentOffsetNeedsRewrite=!1,this.setRenderedContentOffset(this._renderedContentOffset)):this._scrollStrategy.onRenderedOffsetChanged()}))}scrollToOffset(e,t="auto"){let i={behavior:t};this.orientation==="horizontal"?i.start=e:i.top=e,this.scrollable.scrollTo(i)}scrollToIndex(e,t="auto"){this._scrollStrategy.scrollToIndex(e,t)}measureScrollOffset(e){let t;return this.scrollable==this?t=i=>super.measureScrollOffset(i):t=i=>this.scrollable.measureScrollOffset(i),Math.max(0,t(e??(this.orientation==="horizontal"?"start":"top"))-this.measureViewportOffset())}measureViewportOffset(e){let t,i="left",o="right",r=this.dir?.value=="rtl";e=="start"?t=r?o:i:e=="end"?t=r?i:o:e?t=e:t=this.orientation==="horizontal"?"left":"top";let h=this.scrollable.measureBoundingClientRectWithScrollOffset(t);return this.elementRef.nativeElement.getBoundingClientRect()[t]-h}measureRenderedContentSize(){let e=this._contentWrapper.nativeElement;return this.orientation==="horizontal"?e.offsetWidth:e.offsetHeight}measureRangeSize(e){return this._forOf?this._forOf.measureRangeSize(e,this.orientation):0}checkViewportSize(){this._measureViewportSize(),this._scrollStrategy.onDataLengthChanged()}_measureViewportSize(){this._viewportSize=this.scrollable.measureViewportSize(this.orientation)}_markChangeDetectionNeeded(e){e&&this._runAfterChangeDetection.push(e),this._isChangeDetectionPending||(this._isChangeDetectionPending=!0,this.ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>{this._doChangeDetection()})))}_doChangeDetection(){this._isDestroyed||this.ngZone.run(()=>{this._changeDetectorRef.markForCheck(),this._contentWrapper.nativeElement.style.transform=this._renderedContentTransform,Rt(()=>{this._isChangeDetectionPending=!1;let e=this._runAfterChangeDetection;this._runAfterChangeDetection=[];for(let t of e)t()},{injector:this._injector})})}_calculateSpacerSize(){this._totalContentHeight.set(this.orientation==="horizontal"?"":`${this._totalContentSize}px`),this._totalContentWidth.set(this.orientation==="horizontal"?`${this._totalContentSize}px`:"")}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=x({type:n,selectors:[["cdk-virtual-scroll-viewport"]],viewQuery:function(t,i){if(t&1&&Vt(ln,7),t&2){let o;Bt(o=Nt())&&(i._contentWrapper=o.first)}},hostAttrs:[1,"cdk-virtual-scroll-viewport"],hostVars:4,hostBindings:function(t,i){t&2&&_e("cdk-virtual-scroll-orientation-horizontal",i.orientation==="horizontal")("cdk-virtual-scroll-orientation-vertical",i.orientation!=="horizontal")},inputs:{orientation:"orientation",appendOnly:[2,"appendOnly","appendOnly",Qt]},outputs:{scrolledIndexChange:"scrolledIndexChange"},features:[re([{provide:$i,useFactory:(e,t)=>e||t,deps:[[new xt,new bt(zi)],n]}]),et],ngContentSelectors:an,decls:4,vars:4,consts:[["contentWrapper",""],[1,"cdk-virtual-scroll-content-wrapper"],[1,"cdk-virtual-scroll-spacer"]],template:function(t,i){t&1&&(Lt(),l(0,"div",1,0),Ft(2),a(),S(3,"div",2)),t&2&&(s(3),Wt("width",i._totalContentWidth())("height",i._totalContentHeight()))},styles:[`cdk-virtual-scroll-viewport{display:block;position:relative;transform:translateZ(0)}.cdk-virtual-scrollable{overflow:auto;will-change:scroll-position;contain:strict}.cdk-virtual-scroll-content-wrapper{position:absolute;top:0;left:0;contain:content}[dir=rtl] .cdk-virtual-scroll-content-wrapper{right:0;left:auto}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper{min-height:100%}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-left:0;padding-right:0;margin-left:0;margin-right:0;border-left-width:0;border-right-width:0;outline:none}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper{min-width:100%}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-top:0;padding-bottom:0;margin-top:0;margin-bottom:0;border-top-width:0;border-bottom-width:0;outline:none}.cdk-virtual-scroll-spacer{height:1px;transform-origin:0 0;flex:0 0 auto}[dir=rtl] .cdk-virtual-scroll-spacer{transform-origin:100% 0}
`],encapsulation:2,changeDetection:0})}return n})();function Wi(n,c,e){let t=e;if(!t.getBoundingClientRect)return 0;let i=t.getBoundingClientRect();return n==="horizontal"?c==="start"?i.left:i.right:c==="start"?i.top:i.bottom}var Gi=(()=>{class n{_viewContainerRef=m(ze);_template=m(Et);_differs=m(qt);_viewRepeater=m(ct);_viewport=m(pt,{skipSelf:!0});viewChange=new R;_dataSourceChanges=new R;get cdkVirtualForOf(){return this._cdkVirtualForOf}set cdkVirtualForOf(e){this._cdkVirtualForOf=e,Ai(e)?this._dataSourceChanges.next(e):this._dataSourceChanges.next(new Ze(Le(e)?e:Array.from(e||[])))}_cdkVirtualForOf;get cdkVirtualForTrackBy(){return this._cdkVirtualForTrackBy}set cdkVirtualForTrackBy(e){this._needsUpdate=!0,this._cdkVirtualForTrackBy=e?(t,i)=>e(t+(this._renderedRange?this._renderedRange.start:0),i):void 0}_cdkVirtualForTrackBy;set cdkVirtualForTemplate(e){e&&(this._needsUpdate=!0,this._template=e)}get cdkVirtualForTemplateCacheSize(){return this._viewRepeater.viewCacheSize}set cdkVirtualForTemplateCacheSize(e){this._viewRepeater.viewCacheSize=Ie(e)}dataStream=this._dataSourceChanges.pipe(Je(null),kt(),Pt(([e,t])=>this._changeDataSource(e,t)),Mt(1));_differ=null;_data;_renderedItems;_renderedRange;_needsUpdate=!1;_destroyed=new R;constructor(){let e=m(me);this.dataStream.subscribe(t=>{this._data=t,this._onRenderedDataChange()}),this._viewport.renderedRangeStream.pipe(Ve(this._destroyed)).subscribe(t=>{this._renderedRange=t,this.viewChange.observers.length&&e.run(()=>this.viewChange.next(this._renderedRange)),this._onRenderedDataChange()}),this._viewport.attach(this)}measureRangeSize(e,t){if(e.start>=e.end)return 0;e.start<this._renderedRange.start||e.end>this._renderedRange.end;let i=e.start-this._renderedRange.start,o=e.end-e.start,r,h;for(let u=0;u<o;u++){let g=this._viewContainerRef.get(u+i);if(g&&g.rootNodes.length){r=h=g.rootNodes[0];break}}for(let u=o-1;u>-1;u--){let g=this._viewContainerRef.get(u+i);if(g&&g.rootNodes.length){h=g.rootNodes[g.rootNodes.length-1];break}}return r&&h?Wi(t,"end",h)-Wi(t,"start",r):0}ngDoCheck(){if(this._differ&&this._needsUpdate){let e=this._differ.diff(this._renderedItems);e?this._applyChanges(e):this._updateContext(),this._needsUpdate=!1}}ngOnDestroy(){this._viewport.detach(),this._dataSourceChanges.next(void 0),this._dataSourceChanges.complete(),this.viewChange.complete(),this._destroyed.next(),this._destroyed.complete(),this._viewRepeater.detach()}_onRenderedDataChange(){this._renderedRange&&(this._renderedItems=this._data.slice(this._renderedRange.start,this._renderedRange.end),this._differ||(this._differ=this._differs.find(this._renderedItems).create((e,t)=>this.cdkVirtualForTrackBy?this.cdkVirtualForTrackBy(e,t):t)),this._needsUpdate=!0)}_changeDataSource(e,t){return e&&e.disconnect(this),this._needsUpdate=!0,t?t.connect(this):be()}_updateContext(){let e=this._data.length,t=this._viewContainerRef.length;for(;t--;){let i=this._viewContainerRef.get(t);i.context.index=this._renderedRange.start+t,i.context.count=e,this._updateComputedContextProperties(i.context),i.detectChanges()}}_applyChanges(e){this._viewRepeater.applyChanges(e,this._viewContainerRef,(o,r,h)=>this._getEmbeddedViewArgs(o,h),o=>o.item),e.forEachIdentityChange(o=>{let r=this._viewContainerRef.get(o.currentIndex);r.context.$implicit=o.item});let t=this._data.length,i=this._viewContainerRef.length;for(;i--;){let o=this._viewContainerRef.get(i);o.context.index=this._renderedRange.start+i,o.context.count=t,this._updateComputedContextProperties(o.context)}}_updateComputedContextProperties(e){e.first=e.index===0,e.last=e.index===e.count-1,e.even=e.index%2===0,e.odd=!e.even}_getEmbeddedViewArgs(e,t){return{templateRef:this._template,context:{$implicit:e.item,cdkVirtualForOf:this._cdkVirtualForOf,index:-1,count:-1,first:!1,last:!1,odd:!1,even:!1},index:t}}static ngTemplateContextGuard(e,t){return!0}static \u0275fac=function(t){return new(t||n)};static \u0275dir=pe({type:n,selectors:[["","cdkVirtualFor","","cdkVirtualForOf",""]],inputs:{cdkVirtualForOf:"cdkVirtualForOf",cdkVirtualForTrackBy:"cdkVirtualForTrackBy",cdkVirtualForTemplate:"cdkVirtualForTemplate",cdkVirtualForTemplateCacheSize:"cdkVirtualForTemplateCacheSize"},features:[re([{provide:ct,useClass:qe}])]})}return n})();var Re=0;function gn(){let n=document.querySelector("ion-progress-bar");n||(n=document.createElement("ion-progress-bar"),n.type="indeterminate",document.body.appendChild(n)),Re===0&&(n.style.display="block"),Re++}function mt(){let n=document.querySelector("ion-progress-bar");Re>0&&Re--,Re===0&&n&&(n.style.display="none")}function ut(n,c,e){let t=e.value;return e.value=function(...i){gn();let o=t.apply(this,i);return o instanceof Promise?o.finally(()=>{mt()}):o&&typeof o.subscribe=="function"?o.pipe(wt(()=>mt())):(mt(),o)},e}var _n=(()=>{class n{hideSelectAll=O(!1);checked=O(!1);indeterminate=O(!1);searchText=O("");selectAllChange=new oe;searchChange=new oe;static \u0275fac=function(t){return new(t||n)};static \u0275cmp=x({type:n,selectors:[["select-all-plus-search"]],inputs:{hideSelectAll:[1,"hideSelectAll"],checked:[1,"checked"],indeterminate:[1,"indeterminate"],searchText:[1,"searchText"]},outputs:{selectAllChange:"selectAllChange",searchChange:"searchChange"},decls:3,vars:4,consts:[[1,"p-l-10"],[1,"m-t-10","m-b-10",3,"ngModelChange","hidden","ngModel","indeterminate"],["placeholder","Search","clearInput","",1,"m-l-20",3,"ngModelChange","ngModel"]],template:function(t,i){t&1&&(l(0,"ion-item",0)(1,"ion-checkbox",1),p("ngModelChange",function(r){return i.selectAllChange.emit(r)}),a(),l(2,"ion-input",2),p("ngModelChange",function(r){return i.searchChange.emit(r)}),a()()),t&2&&(s(),f("hidden",i.hideSelectAll())("ngModel",i.checked())("indeterminate",i.indeterminate()),s(),f("ngModel",i.searchText()))},dependencies:[W,A,z,B,le,he],styles:["ion-item[_ngcontent-%COMP%]::part(native){--background: var(--ion-overlay-background-color, var(--ion-background-color, #fff))}"]})}return n})();function yn(n,c,e,t=!1){let i=Array.from(n.querySelectorAll(t?".alert-checkbox":".alert-radio-button")),o=c.createComponent(_n,{injector:e}),r=o.instance;if(o.setInput("hideSelectAll",!t),r.searchChange.subscribe(h=>{let u=h.toLowerCase();i.forEach(g=>g.style.display=g.innerText.toLowerCase().includes(u)?"block":"none")}),t){r.selectAllChange.subscribe(u=>{n.inputs.forEach(g=>g.checked=u),o.setInput("indeterminate",!1)});let h=()=>{let u=i.filter(b=>b.ariaChecked==="true").length,g=u===i.length;o.setInput("checked",g),o.setInput("indeterminate",!g&&u>0)};h(),i.forEach(u=>u.addEventListener("click",()=>setTimeout(h)))}document.querySelector(".alert-wrapper .alert-message")?.insertAdjacentElement("afterend",o.location.nativeElement)}var Pe=(()=>{class n{viewContainerRef=m(ze);injector=m(Be);ionSelect=m(ae);hideSelectAll=!1;ngAfterViewInit(){this.ionSelect.el.style.pointerEvents="none"}handleClick(){this.ionSelect.open().then(e=>yn(e,this.viewContainerRef,this.injector,this.ionSelect.multiple))}static \u0275fac=function(t){return new(t||n)};static \u0275dir=pe({type:n,selectors:[["","selectSearchAllDirective",""],["",8,"selectsearchalldirective"]],hostBindings:function(t,i){t&1&&p("click",function(){return i.handleClick()})},inputs:{hideSelectAll:"hideSelectAll"}})}return n})();function Sn(n,c){if(n&1&&(l(0,"ion-select-option",10),d(1),a()),n&2){let e=c.$implicit;f("value",e),s(),N(" ",e," ")}}function Cn(n,c){if(n&1){let e=T();l(0,"ion-row")(1,"ion-col",8)(2,"ion-item")(3,"ion-select",9),V("ngModelChange",function(i){let o=w(e).$implicit;return F(o.selectedValues,i)||(o.selectedValues=i),k(i)}),p("ionChange",function(){let i=w(e).$implicit,o=_();return k(o.dropDownOkClicked(i))}),I(4,Sn,2,2,"ion-select-option",10,D),a()()(),l(6,"ion-col",11)(7,"ion-checkbox",12),V("ngModelChange",function(i){let o=w(e).$implicit;return F(o.strictFilter,i)||(o.strictFilter=i),k(i)}),a()()()}if(n&2){let e=c.$implicit;s(3),f("label",e.label),L("ngModel",e.selectedValues),f("multiple",e.isMultitple),s(),E(e.items),s(3),f("disabled",e.selectedValues&&e.selectedValues.length==0),L("ngModel",e.strictFilter)}}var Ki=(()=>{class n{viewCtrl=m(te);dropdownFilterList=Kt([]);showStrictFilter=O(!1);constructor(){q({refreshOutline:Ri,close:ie})}dropDownOkClicked(e){e.selectedValues?.length===0&&(e.strictFilter=!1)}dismissModal(){let e=JSON.parse(JSON.stringify(this.dropdownFilterList()));this.dropdownFilterList.set([]),this.viewCtrl.dismiss({filters:e,showStrictFilter:this.showStrictFilter()})}close(){this.dropdownFilterList.set([]),this.viewCtrl.dismiss()}reset(){this.dropdownFilterList().forEach(e=>{e.selectedValues=[],e.strictFilter=!1})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=x({type:n,selectors:[["dropdown-filter-modal"]],inputs:{dropdownFilterList:[1,"dropdownFilterList"],showStrictFilter:[1,"showStrictFilter"]},outputs:{dropdownFilterList:"dropdownFilterListChange"},decls:18,vars:1,consts:[["translucent",""],["slot","end"],[3,"ngModelChange","ngModel"],["fill","clear",3,"click"],["slot","icon-only","name","refresh-outline"],["slot","icon-only","name","close"],["scrollbarThemeDirective",""],["expand","full",3,"click"],["size","11"],["selectSearchAllDirective","",3,"ngModelChange","ionChange","label","ngModel","multiple"],[3,"value"],["size","1",1,"p-t-20"],[3,"ngModelChange","disabled","ngModel"]],template:function(t,i){t&1&&(l(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),d(3,"Filter"),a(),l(4,"ion-buttons",1)(5,"ion-checkbox",2),V("ngModelChange",function(r){return F(i.showStrictFilter,r)||(i.showStrictFilter=r),r}),a(),l(6,"ion-button",3),p("click",function(){return i.reset()}),S(7,"ion-icon",4),a(),l(8,"ion-button",3),p("click",function(){return i.close()}),S(9,"ion-icon",5),a()()()(),l(10,"ion-content",6)(11,"ion-list"),I(12,Cn,8,5,"ion-row",null,D),a()(),l(14,"ion-footer")(15,"ion-toolbar")(16,"ion-button",7),p("click",function(){return i.dismissModal()}),d(17,"OK"),a()()()),t&2&&(s(5),L("ngModel",i.showStrictFilter),s(7),E(i.dropdownFilterList()))},dependencies:[Pe,W,A,z,H,K,ee,G,le,$,Z,Y,X,we,Ce,B,ae,ke,J],encapsulation:2})}return n})();function vn(n,c){if(n&1&&(l(0,"ion-thumbnail",2),S(1,"ion-img",6),a()),n&2){let e=_();s(),f("src",e.track().albumImage)}}function wn(n,c){if(n&1&&(l(0,"ion-select-option",13),d(1),a()),n&2){let e=c.$implicit;f("value",e),s(),v(e.value)}}function kn(n,c){if(n&1&&(l(0,"ion-select-option",13),d(1),a()),n&2){let e=c.$implicit;f("value",e),s(),v(e.playlistName)}}function Mn(n,c){if(n&1&&S(0,"spotify-track-item",17),n&2){let e=c.$implicit;f("track",e)}}function Pn(n,c){if(n&1&&(l(0,"ion-item-group")(1,"ion-item-divider")(2,"div",16)(3,"span"),d(4),a(),l(5,"span"),d(6),a()()(),I(7,Mn,1,1,"spotify-track-item",17,D),a()),n&2){let e=c.$implicit;s(4),v(e.name),s(2),v(e.tracks.length),s(),E(e.tracks)}}function Tn(n,c){if(n&1&&(l(0,"ion-item-group")(1,"ion-item-divider")(2,"div",16)(3,"span"),d(4,"New Songs"),a(),l(5,"span"),d(6),a()()(),I(7,Pn,9,2,"ion-item-group",null,D),a()),n&2){let e=_();s(6),v(e.newTracksLength()),s(),E(e.newTracks())}}function bn(n,c){if(n&1){let e=T();l(0,"ion-item")(1,"ion-input",18),p("ngModelChange",function(i){w(e);let o=_(2);return k(o.playListName.set(i))}),a()()}if(n&2){let e=_(2);s(),f("ngModel",e.playListName())}}function xn(n,c){if(n&1&&(l(0,"ion-select-option",13),d(1),a()),n&2){let e=c.$implicit;f("value",e),s(),v(e.playlistName)}}function Dn(n,c){if(n&1){let e=T();l(0,"ion-item")(1,"ion-select",19),p("ngModelChange",function(i){w(e);let o=_(2);return k(o.selectedPlaylist.set(i))}),I(2,xn,2,2,"ion-select-option",13,D),a()()}if(n&2){let e=_(2);s(),f("ngModel",e.selectedPlaylist()),s(),E(e.playLists())}}function In(n,c){if(n&1){let e=T();l(0,"ion-footer")(1,"ion-toolbar")(2,"ion-row")(3,"ion-col",5)(4,"ion-item")(5,"ion-checkbox",9),p("ngModelChange",function(i){w(e);let o=_();return k(o.newPlaylist.set(i))}),d(6,"Create Playlist?"),a()()(),l(7,"ion-col",5),M(8,bn,2,1,"ion-item"),M(9,Dn,4,1,"ion-item"),a()()(),l(10,"ion-toolbar")(11,"ion-button",15),p("click",function(){w(e);let i=_();return k(i.createPlayList())}),d(12,"Create"),a()()()}if(n&2){let e=_();s(5),f("ngModel",e.newPlaylist()),s(3),P(e.newPlaylist()?8:-1),s(),P(e.newPlaylist()?-1:9)}}function En(n,c){if(n&1){let e=T();l(0,"ion-item")(1,"ion-input",13),V("ngModelChange",function(i){w(e);let o=_();return F(o.newPlaylistName,i)||(o.newPlaylistName=i),k(i)}),a()()}if(n&2){let e=_();s(),f("autofocus","true"),L("ngModel",e.newPlaylistName)}}function On(n,c){if(n&1&&(l(0,"ion-select-option",15),d(1),a()),n&2){let e=c.$implicit;f("value",e),s(),N(" ",e.playlistName," ")}}function Rn(n,c){if(n&1){let e=T();l(0,"ion-item")(1,"ion-select",14),V("ngModelChange",function(i){w(e);let o=_();return F(o.selectedPlaylist,i)||(o.selectedPlaylist=i),k(i)}),I(2,On,2,2,"ion-select-option",15,D),a()()}if(n&2){let e=_();s(),L("ngModel",e.selectedPlaylist),s(),E(e.playLists)}}function Ln(n,c){if(n&1&&(l(0,"ion-item-group")(1,"ion-item-divider"),d(2,"New Tracks"),a(),l(3,"ion-item")(4,"ion-checkbox",16)(5,"h6"),d(6),a(),l(7,"small"),d(8),a()()()()),n&2){let e=_();s(4),f("checked",e.newTracks.checked),s(2),v(e.newTracks.playlistName),s(2),N("Total: ",e.newTracks.trackIds==null?null:e.newTracks.trackIds.length)}}function Fn(n,c){if(n&1){let e=T();l(0,"ion-item")(1,"ion-checkbox",17),V("ngModelChange",function(i){let o=w(e).$implicit;return F(o.value.checked,i)||(o.value.checked=i),k(i)}),l(2,"h6"),d(3),a(),l(4,"small"),d(5),a()()()}if(n&2){let e=c.$implicit;s(),L("ngModel",e.value.checked),s(2),v(e==null?null:e.key),s(2),N("Total: ",e==null||e.value==null||e.value.trackIds==null?null:e.value.trackIds.length)}}function Vn(n,c){if(n&1&&(l(0,"ion-item-group")(1,"ion-item-divider"),d(2,"Existing Tracks"),a(),I(3,Fn,6,3,"ion-item",null,D),$t(5,"keyvalue"),a()),n&2){let e=_();s(3),E(Gt(5,0,e.existingTracks))}}var Bn=(n,c,e)=>[n,c,e,1,5,10];function Nn(n,c){if(n&1){let e=T();l(0,"ion-button",10),p("click",function(){let i=w(e).$implicit,o=_();return k(o.changePosition(i))}),d(1),a()}if(n&2){let e=c.$implicit;s(),N(" ",e," ")}}function An(n,c){if(n&1){let e=T();l(0,"ion-button",11),p("click",function(){let i=w(e).$implicit,o=_();return k(o.dismissModal(i))}),d(1),a()}if(n&2){let e=c.$implicit;s(),N(" ",e," ")}}function zn(n,c){if(n&1&&(l(0,"ion-select-option",7),d(1),a()),n&2){let e=c.$implicit;f("value",e),s(),v(e.playlistName)}}function Wn(n,c){if(n&1&&S(0,"spotify-track-item",10),n&2){let e=c.$implicit;f("track",e)}}function jn(n,c){if(n&1&&(l(0,"small",21),d(1),a()),n&2){let e=_().$implicit;s(),v(e.playCount)}}function Un(n,c){if(n&1&&(l(0,"span",26),d(1),a(),l(2,"span",26),d(3),l(4,"small"),d(5),a()(),l(6,"span",26),d(7),l(8,"small"),d(9),a()()),n&2){let e=_().$implicit,t=_();s(),v(t.settings().showAlbumName?e.artistName:e.albumName),s(2),N("",e.mood," "),s(2),v(e.moodRank),s(2),N("",e.genre," "),s(2),v(e.genreRank)}}function $n(n,c){if(n&1){let e=T();l(0,"ion-button",36),p("click",function(){w(e);let i=_().$implicit,o=_();return k(o.openAdditionOperationsAlert([i]))}),S(1,"ion-icon",37),a()}}function Gn(n,c){if(n&1){let e=T();l(0,"ion-checkbox",38),V("ngModelChange",function(i){w(e);let o=_().$implicit;return F(o.checked,i)||(o.checked=i),k(i)}),a()}if(n&2){let e=_().$implicit;L("ngModel",e.checked)}}function Hn(n,c){if(n&1){let e=T();l(0,"ion-item-sliding",19),p("ionDrag",function(i){let o=w(e).$implicit,r=_();return k(r.promoteOrDemoteTrack(o,i))}),l(1,"ion-item",20),M(2,jn,2,1,"small",21),l(3,"ion-thumbnail",22),S(4,"ion-img",23),a(),l(5,"ion-label")(6,"h3"),d(7),a(),l(8,"p",24)(9,"span",25),d(10),a(),M(11,Un,10,5),l(12,"span",26),d(13),a()()(),l(14,"ion-buttons",27),M(15,$n,2,0,"ion-button",28),a(),M(16,Gn,1,1,"ion-checkbox",29),l(17,"span",30),d(18),a()(),l(19,"ion-item-options",31),p("ionSwipe",function(i){let o=w(e).$implicit,r=_();return k(r.swipeStart(o,i))}),l(20,"ion-item-option",32),p("click",function(i){let o=w(e).$implicit,r=_();return k(r.swipeStart(o,i))}),S(21,"ion-icon",33),l(22,"span",34),d(23),a()()(),l(24,"ion-item-options",35),p("ionSwipe",function(i){let o=w(e).$implicit,r=_();return k(r.swipeEnd(o,i))}),l(25,"ion-item-option",32),p("click",function(i){let o=w(e).$implicit,r=_();return k(r.swipeEnd(o,i))}),l(26,"span",34),d(27),a(),S(28,"ion-icon",33),a()()()}if(n&2){let e=c.$implicit,t=_();s(),_e("curr",e.type=="Current")("recent",e.type=="Recent"),s(),P(t.settings().showPlayCount?2:-1),s(2),f("src",e.albumImage),s(3),v(e.trackName),s(3),v(t.settings().showAlbumName?e.albumName:e.artistName),s(),P(t.isDesktop?11:-1),s(2),v(e.playlistName),s(2),P(t.multiSelectMode()?-1:15),s(),P(t.multiSelectMode()?16:-1),s(2),v(e.indexInPlaylist+1),s(2),_e("open-close-open",e.promoteDemote)("open-close-closed",!e.promoteDemote),s(),f("name",e.promoteDemote?"chevron-back-circle-outline":"chevron-up-circle-outline"),s(2),v(e.promoteDemote?"Promote":"Move To Top"),s(2),_e("open-close-open",e.promoteDemote)("open-close-closed",!e.promoteDemote),s(2),v(e.promoteDemote?"Demote":"Move To Bottom"),s(),f("name",jt(e.promoteDemote?"chevron-forward-circle-outline":"chevron-down-circle-outline"))}}function Kn(n,c){if(n&1){let e=T();l(0,"ion-button",16),p("click",function(){w(e);let i=_();return k(i.toggleMultiSelect(!0))}),S(1,"ion-icon",39),a()}}function Zn(n,c){if(n&1){let e=T();l(0,"ion-button",16),p("click",function(){w(e);let i=_();return k(i.openAdditionOperationsAlert([],!0))}),S(1,"ion-icon",40),a()}}function qn(n,c){if(n&1){let e=T();l(0,"ion-button",16),p("click",function(){w(e);let i=_();return k(i.toggleMultiSelect(!1))}),S(1,"ion-icon",41),a()}}function Qn(n,c){if(n&1){let e=T();l(0,"ion-button",16),p("click",function(){w(e);let i=_();return k(i.selectAll())}),S(1,"ion-icon",42),a()}}var Qi=".track-count[_ngcontent-%COMP%]{color:#9d9fa6;font-size:8px;writing-mode:vertical-lr;text-orientation:upright;font-weight:600;margin-right:5px}.track-view-count[_ngcontent-%COMP%]{position:absolute;top:5px;right:50px;font-size:8px;color:var(--ion-text-color-step-600, #666666)}.spotify-list-item[_ngcontent-%COMP%]{border-left:3px solid transparent}.spotify-list-item.curr[_ngcontent-%COMP%]{border-left-color:var(--ion-color-danger)!important}.spotify-list-item.recent[_ngcontent-%COMP%]{border-left-color:var(--ion-color-medium-shade)!important}.spotify-list-item[_ngcontent-%COMP%]   ion-checkbox[_ngcontent-%COMP%]{--size: 20px}.spotify-list-item[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .spotify-list-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:spotify-circular,spotify-circular-cyrillic,spotify-circular-arabic,spotify-circular-hebrew,Helvetica Neue,helvetica,arial,Hiragino Kaku Gothic Pro,Meiryo,MS Gothic,sans-serif;font-weight:600!important}.spotify-list-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:11px}.spotify-list-item[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:0;line-height:1.2;font-size:13px}.spotify-list-item[_ngcontent-%COMP%]   ion-button.more-options[_ngcontent-%COMP%]{font-size:9px;height:32px!important;width:32px!important}.spotify-list-item[_ngcontent-%COMP%]   ion-button.more-options[_ngcontent-%COMP%]::part(native){padding-inline:0!important}.spotify-list-item[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]{height:48px;width:48px;margin-inline-end:10px}.spotify-list-item[_ngcontent-%COMP%]   .track-duration[_ngcontent-%COMP%]{position:relative;bottom:6px;font-size:10px;left:30%;text-align:center;align-items:center;color:var(--ion-text-color-step-600, #666666);font-weight:700}.index-in-playlist[_ngcontent-%COMP%]{color:var(--ion-text-color-step-600, #666666);font-size:8px;min-width:30px;height:30px}.open-close-open[_ngcontent-%COMP%]{background-color:#12232e;transition:background-color .3s ease}.open-close-closed[_ngcontent-%COMP%]{background-color:#203647;transition:background-color .3s ease}.custom-layout[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%}.custom-content[_ngcontent-%COMP%]{flex:auto}.cdk-virtual-scroll-viewport[_ngcontent-%COMP%]{height:100%!important;overflow-y:auto}.cdk-vertical[_ngcontent-%COMP%]{height:100%!important}";function Yn(n,c){if(n&1&&(l(0,"small"),d(1),a()),n&2){let e,t=_();s(),N(" (",(e=t.spotifyListComponent())==null?null:e.commandText(),") ")}}var Yi=(()=>{class n{track=O({});static \u0275fac=function(t){return new(t||n)};static \u0275cmp=x({type:n,selectors:[["spotify-track-item"]],inputs:{track:[1,"track"]},decls:12,vars:5,consts:[[1,"spotify-list-item"],[1,"track-view-count"],["slot","start"],[1,"display-flex"],[1,"flex-basis-50","ellipsis"],[1,"flex-basis-50","ellipsis","m-l-5"],[3,"src"]],template:function(t,i){t&1&&(l(0,"ion-item",0)(1,"small",1),d(2),a(),M(3,vn,2,1,"ion-thumbnail",2),l(4,"ion-label")(5,"h3"),d(6),a(),l(7,"p",3)(8,"span",4),d(9),a(),l(10,"span",5),d(11),a()()()()),t&2&&(s(2),v(i.track().playCount),s(),P(i.track().albumImage?3:-1),s(3),v(i.track().trackName),s(3),v(i.track().albumName),s(2),v(i.track().artistName))},dependencies:[nt,B,ot,rt],styles:[".track-count[_ngcontent-%COMP%]{color:#9d9fa6;font-size:8px;writing-mode:vertical-lr;text-orientation:upright;font-weight:600;margin-right:5px}.track-view-count[_ngcontent-%COMP%]{position:absolute;top:5px;right:50px;font-size:8px;color:var(--ion-text-color-step-600, #666666)}.spotify-list-item[_ngcontent-%COMP%]{border-left:3px solid transparent}.spotify-list-item.curr[_ngcontent-%COMP%]{border-left-color:var(--ion-color-danger)!important}.spotify-list-item.recent[_ngcontent-%COMP%]{border-left-color:var(--ion-color-medium-shade)!important}.spotify-list-item[_ngcontent-%COMP%]   ion-checkbox[_ngcontent-%COMP%]{--size: 20px}.spotify-list-item[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .spotify-list-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:spotify-circular,spotify-circular-cyrillic,spotify-circular-arabic,spotify-circular-hebrew,Helvetica Neue,helvetica,arial,Hiragino Kaku Gothic Pro,Meiryo,MS Gothic,sans-serif;font-weight:600!important}.spotify-list-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:11px}.spotify-list-item[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:0;line-height:1.2;font-size:13px}.spotify-list-item[_ngcontent-%COMP%]   ion-button.more-options[_ngcontent-%COMP%]{font-size:9px;height:32px!important;width:32px!important}.spotify-list-item[_ngcontent-%COMP%]   ion-button.more-options[_ngcontent-%COMP%]::part(native){padding-inline:0!important}.spotify-list-item[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]{height:48px;width:48px;margin-inline-end:10px}.spotify-list-item[_ngcontent-%COMP%]   .track-duration[_ngcontent-%COMP%]{position:relative;bottom:6px;font-size:10px;left:30%;text-align:center;align-items:center;color:var(--ion-text-color-step-600, #666666);font-weight:700}.index-in-playlist[_ngcontent-%COMP%]{color:var(--ion-text-color-step-600, #666666);font-size:8px;min-width:30px;height:30px}.open-close-open[_ngcontent-%COMP%]{background-color:#12232e;transition:background-color .3s ease}.open-close-closed[_ngcontent-%COMP%]{background-color:#203647;transition:background-color .3s ease}.custom-layout[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%}.custom-content[_ngcontent-%COMP%]{flex:auto}.cdk-virtual-scroll-viewport[_ngcontent-%COMP%]{height:100%!important;overflow-y:auto}.cdk-vertical[_ngcontent-%COMP%]{height:100%!important}"]})}return n})(),Ji=function(n){return n.albumId="Album",n.artistId="Artist",n.playlistId="PlayList",n}(Ji||{}),Jn=(()=>{class n{spotifyTrackPlaylistService=m(ye);spotifyOperationsService=m(Se);loadingController=m(lt);modalController=m(te);playLists=C([]);typeToCreate=C(Object.entries(Ji).map(([e,t])=>({key:e,value:t})));newTracks=C([]);newTracksLength=We(()=>this.newTracks().reduce((e,t)=>e+t.tracks.length,0));newPlaylist=C(!0);selectedPlaylist=C(null);takeTopSongsFrom=C("Individual");strictTop=C(!0);skip=C(0);take=C(1);selectedTypeToCreate=C(this.typeToCreate()[0]);selectedPlaylists=C([]);playListName=C("");modalData=O();constructor(){q({close:ie})}async ngOnInit(){await this.loadPlaylists()}async loadPlaylists(){let e=await this.spotifyTrackPlaylistService.fetchUserPlaylists(!0);this.playLists.set(e.map(t=>({playlistId:t.id,playlistName:t.name,playlistSnapshotId:t.snapshot_id,playlistLength:t.tracks.total})))}async loadPlayDetails(){let{newTracks:e,newTracksLength:t,newPlaylistName:i}=await this.spotifyOperationsService.getSortedPlaylistData(this.modalData()?.tracks||[],this.selectedPlaylists(),this.selectedTypeToCreate().value,this.strictTop(),this.skip(),this.take());this.newTracks.set(e),this.playListName.set(i)}async createPlayList(){await this.spotifyOperationsService.createSortedPlaylist(this.newTracks(),this.newPlaylist(),this.playListName(),this.selectedPlaylist()?.playlistId??null)}close(){this.modalController.dismiss()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=x({type:n,selectors:[["spotify-create-sorted-playlist-modal"]],inputs:{modalData:[1,"modalData"]},features:[re([ye,Se])],decls:47,vars:8,consts:[["translucent",""],["slot","end"],["fill","clear",3,"click"],["slot","icon-only","name","close"],["scrollbarThemeDirective",""],["size","6"],["label","Take Top Songs From",3,"ngModelChange","ngModel"],["value","Global"],["value","Individual"],[3,"ngModelChange","ngModel"],["label","Skip","labelPlacement","stacked","type","number","placeholder","Playlist Size",3,"ngModelChange","ngModel"],["label","Take","labelPlacement","stacked","type","number","placeholder","Playlist Size",3,"ngModelChange","ngModel"],["label","Selected By",3,"ngModelChange","ngModel"],[3,"value"],["selectSearchAllDirective","","label","Select Playlist","multiple","",3,"ngModelChange","ngModel"],["expand","full",3,"click"],[1,"display-flex","justify-content-space-between","width-100-pc"],[3,"track"],["label","New Playlist Name","labelPlacement","stacked","placeholder","Playlist Name",3,"ngModelChange","ngModel"],["selectSearchAllDirective","","label","Select Playlist",3,"ngModelChange","ngModel"]],template:function(t,i){t&1&&(l(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),d(3,"Create Sorted Playlist"),a(),l(4,"ion-buttons",1)(5,"ion-button",2),p("click",function(){return i.close()}),S(6,"ion-icon",3),a()()()(),l(7,"ion-content",4)(8,"ion-list")(9,"ion-item-group")(10,"ion-item-divider"),d(11,"Options"),a(),l(12,"ion-row")(13,"ion-col",5)(14,"ion-item")(15,"ion-select",6),p("ngModelChange",function(r){return i.takeTopSongsFrom.set(r)}),l(16,"ion-select-option",7),d(17,"Global"),a(),l(18,"ion-select-option",8),d(19,"Individual"),a()()()(),l(20,"ion-col",5)(21,"ion-item")(22,"ion-checkbox",9),p("ngModelChange",function(r){return i.strictTop.set(r)}),a()()()(),l(23,"ion-row")(24,"ion-col",5)(25,"ion-item")(26,"ion-input",10),p("ngModelChange",function(r){return i.skip.set(r)}),a()()(),l(27,"ion-col",5)(28,"ion-item")(29,"ion-input",11),p("ngModelChange",function(r){return i.take.set(r)}),a()()()(),l(30,"ion-row")(31,"ion-col",5)(32,"ion-item")(33,"ion-select",12),p("ngModelChange",function(r){return i.selectedTypeToCreate.set(r)}),I(34,wn,2,2,"ion-select-option",13,D),a()()(),l(36,"ion-col",5)(37,"ion-item")(38,"ion-select",14),p("ngModelChange",function(r){return i.selectedPlaylists.set(r)}),I(39,kn,2,2,"ion-select-option",13,D),a()()()()(),l(41,"ion-item")(42,"ion-toolbar")(43,"ion-button",15),p("click",function(){return i.loadPlayDetails()}),d(44,"Load"),a()()(),M(45,Tn,9,1,"ion-item-group"),a()(),M(46,In,13,3,"ion-footer")),t&2&&(s(15),f("ngModel",i.takeTopSongsFrom()),s(7),f("ngModel",i.strictTop()),s(4),f("ngModel",i.skip()),s(3),f("ngModel",i.take()),s(4),f("ngModel",i.selectedTypeToCreate()),s(),E(i.typeToCreate()),s(4),f("ngModel",i.selectedPlaylists()),s(),E(i.playLists()),s(6),P(i.newTracks().length?45:-1),s(),P(i.newTracks().length?46:-1))},dependencies:[W,A,z,Pe,$,G,Ce,Y,J,H,Z,B,De,ve,X,we,ae,ke,ee,K,Yi,le,he],encapsulation:2})}return ge([ni({message:"Loading"})],n.prototype,"loadPlayDetails",null),n})(),Xn=(()=>{class n{spotifyUIService=m($e);spotifyDataService=m(Ue);spotifyOperationsService=m(Se);viewCtrl=m(te);playLists=[];selectedPlaylist={playlistId:"",playlistName:"",playlistSnapshotId:"",playlistLength:0};filterCategoryText="mood:Melanc";playlistId="";newPlaylist=!0;newPlaylistName="";newTracks={playlistName:"",trackIds:[]};existingTracks=new Map;modalData=O({});constructor(){q({close:ie})}async ngOnInit(){this.playLists=await this.spotifyUIService.getAvailablePlaylists(!0),this.selectedPlaylist=this.playLists[0]}async populateIds(){let e=await this.spotifyDataService.filterPropertiesByCategory(this.filterCategoryText),t=this.modalData().tracks,i=new Map,o=[];for(let h of e.split(",").map(u=>u.trim()).filter(Boolean)){let u=t.find(g=>g.trackId===h);if(u){let g=u.playlistName,b=i.get(g);i.set(g,{playlistName:g,trackIds:[u.uri,...b?.trackIds||[]]})}else o.push("spotify:track:"+h)}this.newTracks={playlistName:"TrackIds not found in modal tracks or corrupted",trackIds:o,checked:!1},this.existingTracks=i;let r=this.filterCategoryText.split(":")[1]||"New Playlist";this.newPlaylistName=await this.spotifyUIService.generateNewPlaylistNameForDuplicate(t,r)}async loadPlayDetails(){let e=this.modalData().tracks,{newTracks:t,existingTracks:i,newPlaylistName:o}=await this.spotifyUIService.prepareDuplicatePlaylistData(e,this.playlistId);this.newTracks=t,this.existingTracks=i,this.newPlaylistName=o}async createPlaylist(){let e=await this.spotifyOperationsService.createDuplicatePlaylist({newPlaylist:this.newPlaylist,newPlaylistName:this.newPlaylistName,selectedPlaylistId:this.selectedPlaylist.playlistId,existingTracks:this.existingTracks||new Map,newTracks:this.newTracks.checked?this.newTracks:{playlistName:"",trackIds:[]}});this.dismissModal(e)}dismissModal(e){this.viewCtrl.dismiss({success:!0,playlistId:e})}close(){this.viewCtrl.dismiss()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=x({type:n,selectors:[["spotify-duplicate-playlist-modal"]],inputs:{modalData:[1,"modalData"]},features:[re([$e,Ue,Se])],decls:37,vars:10,consts:[["translucent",""],["slot","end"],["fill","clear",3,"click"],["slot","icon-only","name","close"],["scrollbarThemeDirective",""],["size","6"],["label","Playlist Id","labelPlacement","stacked","placeholder","Playlist Id",3,"ngModelChange","autofocus","ngModel"],["size","5"],["label","Filter by Category","labelPlacement","stacked","placeholder","Enter category value...",3,"ngModelChange","ngModel"],["size","1"],["expand","full",3,"click","disabled"],[3,"ngModelChange","ngModel"],["expand","full",3,"click"],["label","New Playlist Name","labelPlacement","stacked","placeholder","New Playlist Name",3,"ngModelChange","autofocus","ngModel"],["selectSearchAllDirective","","label","Select Playlist",3,"ngModelChange","ngModel"],[3,"value"],["labelPlacement","start",3,"checked"],["labelPlacement","start","mode","ios",3,"ngModelChange","ngModel"]],template:function(t,i){t&1&&(l(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),d(3,"Create Playlist Copy"),a(),l(4,"ion-buttons",1)(5,"ion-button",2),p("click",function(){return i.close()}),S(6,"ion-icon",3),a()()()(),l(7,"ion-content",4)(8,"ion-list")(9,"ion-item-group")(10,"ion-row")(11,"ion-col",5)(12,"ion-item")(13,"ion-input",6),V("ngModelChange",function(r){return F(i.playlistId,r)||(i.playlistId=r),r}),a()()(),l(14,"ion-col",7)(15,"ion-item")(16,"ion-input",8),V("ngModelChange",function(r){return F(i.filterCategoryText,r)||(i.filterCategoryText=r),r}),a()()(),l(17,"ion-col",9)(18,"ion-button",10),p("click",function(){return i.populateIds()}),d(19,"Files Data"),a()(),l(20,"ion-col",5)(21,"ion-item")(22,"ion-checkbox",11),V("ngModelChange",function(r){return F(i.newPlaylist,r)||(i.newPlaylist=r),r}),d(23,"Create Playlist?"),a()()(),l(24,"ion-col",5),M(25,En,2,2,"ion-item"),M(26,Rn,4,1,"ion-item"),a()(),l(27,"ion-item")(28,"ion-toolbar")(29,"ion-button",10),p("click",function(){return i.loadPlayDetails()}),d(30," Load Details "),a()()()(),M(31,Ln,9,3,"ion-item-group"),M(32,Vn,6,2,"ion-item-group"),a()(),l(33,"ion-footer")(34,"ion-toolbar")(35,"ion-button",12),p("click",function(){return i.createPlaylist()}),d(36,"Create"),a()()()),t&2&&(s(13),f("autofocus","true"),L("ngModel",i.playlistId),s(3),L("ngModel",i.filterCategoryText),s(2),f("disabled",!i.filterCategoryText),s(4),L("ngModel",i.newPlaylist),s(3),P(i.newPlaylist?25:-1),s(),P(i.newPlaylist?-1:26),s(3),f("disabled",!i.playlistId),s(2),P(i.newTracks.playlistName?31:-1),s(),P(i.existingTracks.size>0?32:-1))},dependencies:[W,A,z,Pe,$,G,le,Ce,Y,J,H,Z,B,De,ve,he,X,we,ke,ae,ee,K,Yt],encapsulation:2})}return n})(),eo=(()=>{class n{viewCtrl=m(te);initialVal=0;modalData=O({position:1,rangeLength:1,playlistLength:0});buttons=[y.Promote,y.Demote,y.Reorder,y.MoveToTop,y.MoveToBottom];constructor(){q({close:ie,refresh:at})}ngOnInit(){this.initialVal=this.modalData().position}updateModalData(e,t){this.modalData()[e]=t}resetPosition(){this.setPosition(this.initialVal)}setPosition(e){this.modalData().position=e}changePosition(e){this.modalData().position+=e}dismissModal(e){let{rangeLength:t,position:i,playlistLength:o}=this.modalData();if(t>1&&[y.Demote,y.Promote].includes(e))throw new Error(`${[y.Demote,y.Promote].join(",")} don't support multiple tracks. Update Range length to 1`);if(i==null||t==null||i>o||i<1||t<1)throw new Error("Invalid Data");this.viewCtrl.dismiss(ce(ne({},this.modalData()),{success:!0,operation:e}))}close(){this.viewCtrl.dismiss()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=x({type:n,selectors:[["spotify-move-to-top-or-bottom-modal"]],inputs:{modalData:[1,"modalData"]},decls:34,vars:9,consts:[["translucent",""],["slot","end"],["fill","clear",3,"click"],["slot","icon-only","name","close"],["scrollbarThemeDirective",""],["type","number","placeholder","Range Length",3,"ngModelChange","ngModel","min"],["type","number","placeholder","Position",3,"ngModelChange","ngModel","max","min"],["slot","icon-only","name","refresh"],[1,"p-t-5","display-flex","justify-content-space-around"],["expand","full"],[3,"click"],["expand","full",3,"click"]],template:function(t,i){if(t&1&&(l(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),d(3,"Move To Top Or Bottom"),a(),l(4,"ion-buttons",1)(5,"ion-button",2),p("click",function(){return i.close()}),S(6,"ion-icon",3),a()()()(),l(7,"ion-content",4)(8,"ion-list")(9,"ion-item-group")(10,"ion-item-divider"),d(11,"Range Length (Next no of songs)"),a(),l(12,"ion-item")(13,"ion-input",5),p("ngModelChange",function(r){return i.updateModalData("rangeLength",r)}),a()()(),l(14,"ion-item-group")(15,"ion-item-divider"),d(16,"Position"),a(),l(17,"ion-item")(18,"ion-input",6),p("ngModelChange",function(r){return i.updateModalData("position",r)}),a(),l(19,"ion-buttons")(20,"ion-button",2),p("click",function(){return i.resetPosition()}),S(21,"ion-icon",7),a(),l(22,"ion-button",2),p("click",function(){return i.setPosition(1)}),S(23,"ion-icon",3),a()()()(),l(24,"ion-item-group")(25,"ion-item-divider"),d(26,"Change Position"),a(),l(27,"ion-buttons",8),I(28,Nn,2,1,"ion-button",null,D),a()()()(),l(30,"ion-footer")(31,"ion-toolbar"),I(32,An,2,1,"ion-button",9,D),a()()),t&2){let o,r,h;s(13),f("ngModel",(o=i.modalData())==null?null:o.rangeLength)("min",1),s(5),f("ngModel",(r=i.modalData())==null?null:r.position)("max",(h=i.modalData())==null?null:h.playlistLength)("min",0),s(10),E(Ut(5,Bn,-10,-5,-1)),s(4),E(i.buttons)}},dependencies:[W,A,z,$,G,Y,J,H,Z,he,B,De,ve,X,ee,K],encapsulation:2})}return n})(),to=(()=>{class n{spotifyService=m(ye);viewCtrl=m(te);playLists=[];modalData=O({});constructor(){q({close:ie})}ngOnInit(){this.loadPlaylists()}updateDestinationPlaylist(e){this.modalData().destinationPlaylist=e,this.modalData().position=this.modalData()?.destinationPlaylist?.playlistLength}updatePosition(e){this.modalData().position=e}async loadPlaylists(){try{let e=await this.spotifyService.fetchUserPlaylists(!0);this.playLists=e?.map(t=>({playlistId:t.id,playlistName:t.name,playlistSnapshotId:t.snapshot_id,playlistLength:t.tracks.total})),this.modalData().destinationPlaylist=this.playLists?.[0]}catch(e){console.error("Error loading playlists:",e)}}dismissModal(){let{position:e,destinationPlaylist:t,selectedTracks:i}=this.modalData();e==null||t==null||this.viewCtrl.dismiss(ce(ne({},this.modalData()),{moveTracks:i?.filter(o=>o.playlistId!=t?.playlistId)}))}close(){this.viewCtrl.dismiss()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=x({type:n,selectors:[["spotify-move-track-modal"]],inputs:{modalData:[1,"modalData"]},features:[re([ye])],decls:31,vars:5,consts:[["translucent",""],["slot","end"],["fill","clear",3,"click"],["slot","icon-only","name","close"],["scrollbarThemeDirective",""],["size","6"],["selectSearchAllDirective","","label","Select Source Playlist",3,"ngModelChange","ngModel"],[3,"value"],["label","Position","labelPlacement","stacked","type","number","placeholder","Position",3,"ngModelChange","ngModel","max","min"],[1,"display-flex","justify-content-space-between","width-100-pc"],[3,"track"],["expand","full",3,"click"]],template:function(t,i){if(t&1&&(l(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),d(3,"Move Tracks"),a(),l(4,"ion-buttons",1)(5,"ion-button",2),p("click",function(){return i.close()}),S(6,"ion-icon",3),a()()()(),l(7,"ion-content",4)(8,"ion-list")(9,"ion-row")(10,"ion-col",5)(11,"ion-item")(12,"ion-select",6),p("ngModelChange",function(r){return i.updateDestinationPlaylist(r)}),I(13,zn,2,2,"ion-select-option",7,D),a()()(),l(15,"ion-col",5)(16,"ion-item")(17,"ion-input",8),p("ngModelChange",function(r){return i.updatePosition(r)}),a()()()(),l(18,"ion-item-group")(19,"ion-item-divider")(20,"div",9)(21,"span"),d(22,"Selected Songs"),a(),l(23,"span"),d(24),a()()(),I(25,Wn,1,1,"spotify-track-item",10,D),a()()(),l(27,"ion-footer")(28,"ion-toolbar")(29,"ion-button",11),p("click",function(){return i.dismissModal()}),d(30,"OK"),a()()()),t&2){let o,r,h;s(12),f("ngModel",(o=i.modalData())==null?null:o.destinationPlaylist),s(),E(i.playLists),s(4),f("ngModel",(r=i.modalData())==null?null:r.position)("max",(h=i.modalData().destinationPlaylist)==null?null:h.playlistLength)("min",0),s(7),v(i.modalData().selectedTracks.length),s(),E(i.modalData().selectedTracks)}},dependencies:[W,A,z,Pe,$,G,Ce,Y,J,H,he,Z,B,De,ve,X,we,ke,ee,K,Yi,ae],encapsulation:2})}return n})(),io=(()=>{class n{viewCtrl=m(te);settings=O();refreshCacheEvent=new oe;constructor(){q({close:ie})}ngOnInit(){this.settings()}saveSettings(){this.viewCtrl.dismiss({success:!0,settings:this.settings()})}close(){this.viewCtrl.dismiss()}updateSetting(e,t){this.settings()[e]=t}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=x({type:n,selectors:[["spotify-settings-modal"]],inputs:{settings:[1,"settings"]},outputs:{refreshCacheEvent:"refreshCacheEvent"},decls:24,vars:2,consts:[["translucent",""],["slot","end"],["fill","clear",3,"click"],["slot","icon-only","name","close"],["scrollbarThemeDirective",""],[3,"ngModelChange","ngModel"],["expand","full",3,"click"]],template:function(t,i){if(t&1&&(l(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),d(3,"Settings"),a(),l(4,"ion-buttons",1)(5,"ion-button",2),p("click",function(){return i.close()}),S(6,"ion-icon",3),a()()()(),l(7,"ion-content",4)(8,"ion-list")(9,"ion-item-group")(10,"ion-item")(11,"ion-toggle",5),p("ngModelChange",function(r){return i.updateSetting("showAlbumName",r)}),d(12," Show AlbumName "),a()(),l(13,"ion-item")(14,"ion-toggle",5),p("ngModelChange",function(r){return i.updateSetting("showPlayCount",r)}),d(15," Show PlayCount "),a()(),l(16,"ion-item")(17,"ion-toolbar")(18,"ion-button",6),p("click",function(r){return i.refreshCacheEvent.emit(r)}),d(19," Refresh PlayCount Cache "),a()()()()()(),l(20,"ion-footer")(21,"ion-toolbar")(22,"ion-button",6),p("click",function(){return i.saveSettings()}),d(23,"Save"),a()()()),t&2){let o,r;s(11),f("ngModel",(o=i.settings())==null?null:o.showAlbumName),s(3),f("ngModel",(r=i.settings())==null?null:r.showPlayCount)}},dependencies:[W,A,z,$,G,Y,J,H,Z,B,ve,X,ee,Si,K],encapsulation:2})}return n})(),ht=3e3,no=(()=>{class n{recognition;isListening=!1;activePage="";lastStartTimestamp;isRestarting=!1;commandSubject=new R;command$=this.commandSubject.asObservable();proceed;clientId="Iv1.b507a08c87ecfe98";errorCount=0;zone=m(me);constructor(){this.lastStartTimestamp=Date.now()}startRecognition(){console.log("Starting speech recognition...");let{webkitSpeechRecognition:e}=window;this.recognition=new e,this.recognition.continuous=!0,this.recognition.interimResults=!0,this.recognition.lang="en-US",this.recognition.onstart=this.onRecognitionStart.bind(this),this.recognition.onresult=this.onRecognitionResult.bind(this),this.recognition.onerror=this.onRecognitionError.bind(this),this.recognition.onend=this.onRecognitionEnd.bind(this),this.startListening()}stopRecognition(){console.log("Stopping speech recognition..."),this.isListening=!1,this.isRestarting=!1,this.recognition&&(this.recognition.onend=null,this.recognition.onerror=null,this.recognition.onresult=null,this.recognition.onstart=null,this.recognition.stop(),this.recognition=null)}onRecognitionStart(){console.log("Speech recognition started"),this.isListening=!0,this.isRestarting=!1,this.lastStartTimestamp=Date.now()}onRecognitionResult(e){let t="";for(let i=e.resultIndex;i<e.results.length;i++)t+=e.results[i][0].transcript,e.results[i].isFinal?(console.log("Final result: ",t),this.zone.run(()=>{this.commandSubject.next({command:t.trim().toLowerCase(),page:this.activePage})})):console.log("Partial result: ",t)}onRecognitionError(e){if(console.log("Speech recognition error: ",e.error),this.isListening=!1,["aborted","not-allowed"].includes(e.error)){if(this.errorCount++,this.errorCount>3&&this.errorCount<=7)this.lastStartTimestamp=Date.now()+3e4;else if(this.errorCount>7){this.stopRecognition(),console.error("Speech recognition aborted or not allowed too many times. Please refresh the page or check microphone permissions.");return}this.stopRecognition(),this.startRecognition()}else this.errorCount=0}onRecognitionEnd(){console.log("Speech recognition ended"),this.isListening=!1,this.startListening()}startListening(){if(this.isRestarting||this.isListening)return;let e=Date.now(),t=e-this.lastStartTimestamp;t>ht?this.recognition.start():(console.log("Delaying recognition restart..."+new Date(e+(ht-t)).toLocaleTimeString()),this.isRestarting=!0,setTimeout(()=>{this.isListening||this.recognition.start(),this.isRestarting=!1},ht-t))}setActivePage(e){this.activePage=e}async speak(e){let t=new SpeechSynthesisUtterance(e),o=await(async()=>{let u=speechSynthesis.getVoices();for(;u.length===0;)await new Promise(g=>setTimeout(g,100)),u=speechSynthesis.getVoices();return u})(),r="Microsoft Neerja Online (Natural) - English (India)",h=o.find(u=>u.name.includes(r));t.voice=h||o[0],t.volume=1,this.isListening&&this.recognition.stop(),t.onend=()=>{this.startListening()},speechSynthesis.speak(t)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Zi="SpotifyFilterCriteriaKey",qi="SpotifySettingsKey",ft=(()=>{class n{alertController=m(_i);actionSheetController=m(gi);spotifyUIService=ue($e);spotifyPlayerService=ue(oi);spotifyTrackPlaylistService=ue(ye);spotifyOperationsService=ue(Se);spotifyDataService=ue(Ue);spotifyCacheService=ue(ri);modalController=m(te);loadingController=m(lt);title=m(Xt);renderer=m(Ae);platform=m(si);voiceCommandsService=m(no);searchList=["trackName","playlistName","artistName","albumName","mood","genre"];dropdownFilterListProps=["playlistName","artistName","albumName","duplicateCount","recentlyPlayedIndex"];sortList=["trackName","playlistName","addedAt","indexInPlaylist","playCount","artistName","albumName","duplicateCount","recentlyPlayedIndex"];tracksInMemory=C([]);dropdownFilterList=C([]);showStrictFilter=C(!0);searchBy=C("");sortBy=C("recentlyPlayedIndex");sortByReverse=C(!1);multiSelectMode=C(!1);settings=C({showAlbumName:!0,showPlayCount:!1});tracks=We(()=>this.spotifyUIService.applyFiltersAndSort(this.tracksInMemory(),this.dropdownFilterList(),this.searchBy(),this.searchList,this.sortBy(),this.sortByReverse()));filterBadgeCount=We(()=>this.dropdownFilterList().filter(e=>e.selectedValues.length>0).length);isDesktop=(this.platform.is("desktop")||this.platform.is("mobile")||this.platform.is("mobileweb"))&&!this.platform.is("android");otherOperations={};queuedOperations=[];commandMatched=C(!1);timeoutId;currentCommandId;commandText=C("");constructor(){this.addIcons(),this.subscribeToVoiceCommands(),this.isDesktop&&this.voiceCommandsService.startRecognition()}subscribeToVoiceCommands(){this.voiceCommandsService.setActivePage("spotify"),this.voiceCommandsService.command$.subscribe(async({command:e,page:t})=>{let i=e.trim(),o=i.split(" ").length,r=["top","bottom"].some(U=>i.toLowerCase().includes(U));if(o>2&&!(r&&o<=3)||t!=="spotify")return;let h=i.toLowerCase().replace(/[^a-z0-9]/g,""),u=["play","pause","next","previous","seek","forward","backward","volumeup","volumedown","unmute","mute","promote","demote","current","top","bottom","delete","like","add"],g=new Set(["promote","demote","current","top","bottom","delete","like","add"]),b=u.find(U=>h.includes(U));if(this.commandText.set(`${i} - ${new Date().toLocaleTimeString()}`),this.commandMatched.set(!!b),!!b)if(clearTimeout(this.timeoutId),this.currentCommandId=Date.now(),this.setTitleWithTypingEffect(b,this.currentCommandId),this.timeoutId=setTimeout(()=>this.title.setTitle("Spotify"),1e4),g.has(b)){let U=await this.spotifyPlayerService.fetchCurrentUserPlayback();this.spotifyTrackPlaylistService.updateCurrentTrack(this.tracksInMemory(),U);let Te=this.tracksInMemory().find(se=>se.type==="Current"&&se.trackId===U?.trackId)??(U?this.tracksInMemory().find(se=>this.spotifyTrackPlaylistService.filterCondition(se,U)):void 0);if(!Te){this.voiceCommandsService.speak("No song is playing currently");return}if(b==="current")this.voiceCommandsService.speak(`Current song is ${Te.trackName} By ${Te.artistName} from ${Te.albumName}`);else{let se=it(b,ai);if(se!==void 0){let Xi=y[se];await this.handleTrackOperation([Te],Xi)}}}else await this.spotifyPlayerService.sendExtensionCommand(b)})}async setTitleWithTypingEffect(e,t){this.title.setTitle(""),e=e.charAt(0).toUpperCase()+e.slice(1);for(let o=0;o<e.length;o+=2){if(this.currentCommandId!==t)return;this.title.setTitle(this.title.getTitle()+e.slice(o,o+2)),await this.delay(100)}}delay(e){return new Promise(t=>setTimeout(t,e))}promoteOrDemoteTrack(e,t){let i=this.isDesktop?2.5:1.75;(t.detail.ratio<-i||t.detail.ratio>i)&&(e.promoteDemote=!0),e.promoteDemote&&t.detail.ratio>-.6&&t.detail.ratio<.6&&(e.promoteDemote=!1)}async handleTrackOperation(e,t){let i=it(t,y),o=i!==void 0?li[i]:"",r=await this.spotifyOperationsService.executeTrackOperation(e,t),h=Array.isArray(r)?r:[r];await this.loadTracks(!1,h),this.voiceCommandsService.speak(`${o} ${e[0].trackName} By ${e[0].artistName} to ${e[0].playlistName}`)}addIcons(){q({ellipsisVertical:Ii,chevronBackCircleOutline:ki,chevronUpCircleOutline:Ti,chevronDownCircleOutline:Mi,chevronForwardCircleOutline:Pi,settingsOutline:Li,refresh:at,funnelOutline:Ei,swapVertical:Fi,checkmark:vi,menu:Oi,close:ie,checkmarkDoneCircle:wi})}ngOnDestroy(){this.voiceCommandsService.stopRecognition(),clearInterval(this.intervalId)}intervalId;ngOnInit(){this.getSpotifySettings().then(e=>this.settings.set(e)),this.tryLoadTracks(),this.intervalId=setInterval(()=>this.tryLoadTracks(),3e4)}async tryLoadTracks(){await this.modalController.getTop()||await this.alertController.getTop()||this.multiSelectMode()||await this.loadTracks()}trackByItem(e,t){return t.trackId}async getSpotifySettings(e=!1){return{showAlbumName:!0,showPlayCount:!1}}async openSettingsModal(){this.otherOperations[this.openSettingsModal.name]="Opened";let e=new oe;e.subscribe(async()=>{await this.spotifyDataService.fetchViewCount(this.tracksInMemory().filter(o=>!o.playlistName.startsWith("Sorted_On_")),!0)});let t=await this.modalController.create({component:io,componentProps:{refreshCacheEvent:e,settings:ne({},this.settings())}});await t.present();let{data:i}=await t.onWillDismiss();delete this.otherOperations[this.openSettingsModal.name],i&&(await ii.setItem(qi,i.settings,void 0,je),this.settings.set(await this.getSpotifySettings()))}async loadTracks(e=!1,t=[],i=null){this.multiSelectMode.set(!1);try{let o=await this.getDefaultFilterCriteria(Zi),{tracksInMemory:r,dropdownFilterList:h}=await this.spotifyCacheService.prepareTracks(e,t,this.settings().showPlayCount,this.dropdownFilterListProps,this.searchList,o);this.tracksInMemory.set(r),this.dropdownFilterList.set(h)}catch(o){console.error("Error loading tracks:",o)}finally{i?.target?.complete()}}toggleMultiSelect(e){let t=this.tracksInMemory().map(i=>ce(ne({},i),{checked:!1}));this.tracksInMemory.set(t),this.multiSelectMode.set(e)}setChecked(e){let t=this.tracks(),i=this.tracksInMemory().map(o=>t.find(r=>r.trackId===o.trackId)?ce(ne({},o),{checked:e}):o);this.tracksInMemory.set(i)}selectAll(){let e=this.tracks(),t=e.some(o=>!o.checked),i=this.tracksInMemory().map(o=>e.find(r=>r.trackId===o.trackId)?ce(ne({},o),{checked:t}):o);this.tracksInMemory.set(i)}async openDropDownFilterModal(){let e=await this.modalController.create({component:Ki,componentProps:{dropdownFilterList:JSON.parse(JSON.stringify(this.dropdownFilterList())),showStrictFilter:this.showStrictFilter()}});await e.present();let{data:t}=await e.onWillDismiss();if(t){let i=await this.getDefaultFilterCriteria(Zi),o=this.dropdownFilterListProps.map(r=>{let h=i?.find(g=>g.property===r),u=this.dropdownFilterList().find(g=>g.property===r);return ce(ne({},u||{property:r,label:r,items:[],isMultitple:!0}),{selectedValues:h?.selectedValues||[],strictFilter:h?.strictFilter||!1})});this.dropdownFilterList.set(o),this.showStrictFilter.set(t.showStrictFilter)}}async openMoveTrackModal(e){let t=await this.modalController.create({component:to,componentProps:{modalData:{selectedTracks:e}}});await t.present();let{data:i}=await t.onWillDismiss();i&&await this.spotifyTrackPlaylistService.moveTracks(i.moveTracks,i.destinationPlaylist.playlistId,i.position)}async openDuplicateSpotifyPlaylistModal(){let e=await this.modalController.create({component:Xn,componentProps:{modalData:{tracks:this.tracksInMemory()}}});await e.present();let{data:t}=await e.onWillDismiss();t?.success&&await this.loadTracks(!1,[t.playlistId])}async openCreateSortedPlaylistModal(){let e=await this.modalController.create({component:Jn,componentProps:{modalData:{tracks:this.tracksInMemory()}}});await e.present(),await e.onWillDismiss()}async openAdditionOperationsAlert(e,t=!1){if(e=(t?this.tracks().filter(r=>r.checked):e)||[],t&&e.length==0)return;let i=Object.values(y).filter(r=>r==y.SwapSongs?e.length==2:!t||[y.Promote,y.Demote,y.DeleteSelected,y.MoveBetweenPlaylists].includes(r)).map(r=>({text:r,handler:async()=>{if(r==y.MoveBetweenPlaylists)await this.openMoveTrackModal(e);else if(r===y.MoveToBottomQuick)await this.handleTrackOperation(e,y.MoveToBottom);else if(r===y.MoveToTopQuick)await this.handleTrackOperation(e,y.MoveToTop);else if(r===y.Demote||r===y.Promote)await this.handleTrackOperation(e,r);else if(r==y.DeleteSelected)await(await this.alertController.create({header:"Confirm",message:`Action ${r}`,buttons:[{text:"Cancel",role:"cancel"},{text:"Ok",handler:async()=>{let u=await this.spotifyTrackPlaylistService.batchDeletePlaylistTracks(e);await this.loadTracks(!1,u)}}]})).present();else if([y.MoveToBottom,y.MoveToTop,y.Reorder].includes(r))await this.moveTopOrBottomModal(r,e);else if(r==y.SwapSongs){let[h,u]=e;await this.spotifyTrackPlaylistService.moveTracks([h],u.playlistId,u.indexInPlaylist||0),u.indexInPlaylist+=1,await this.spotifyTrackPlaylistService.moveTracks([u],h.playlistId,h.indexInPlaylist||0)}else throw new Error(`${r} Method not implemented.`)}}));await(await this.actionSheetController.create({header:"Additional Operations",buttons:i})).present()}async moveTopOrBottomModal(e,t){let i=await this.modalController.create({component:eo,componentProps:{modalData:{position:y.Reorder==e?t?.[0]?.indexInPlaylist:y.MoveToTop==e?1:t?.[0]?.playlistLength,rangeLength:1,playlistLength:t?.[0]?.playlistLength}}});await i.present();let{data:o}=await i.onWillDismiss();o?.success&&await this.handleTrackOperation(t,o.operation)}async swipeStart(e,t){await this.handleTrackOperation([e],e.promoteDemote?y.Promote:y.MoveToTop),t?.target?.closest("ion-item-sliding")?.close?.()}async swipeEnd(e,t){await this.handleTrackOperation([e],e.promoteDemote?y.Demote:y.MoveToBottom),t?.target?.closest("ion-item-sliding")?.close?.()}async openSortAlert(){let e=this.sortList.map(i=>({name:i,value:i,label:i,type:"radio",checked:this.sortBy()===i})),t=await this.alertController.create({header:"Sort By",inputs:e,message:'<ion-checkbox class="m-t-15" id="sortByReverse"></ion-checkbox><ion-label class="m-l-25 m-b-10">Reverse</ion-label>',buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary"},{text:"Ok",handler:i=>{this.sortBy.set(i)}}]});t.onDidDismiss().then(()=>{}),await t.present()}async getDefaultFilterCriteria(e){return Promise.resolve([{property:e,selectedValues:[],strictFilter:!1}])}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=x({type:n,selectors:[["spotify-list-component"]],decls:31,vars:9,consts:[["slot","fixed",3,"ionRefresh"],[1,"custom-layout"],[1,"custom-header"],[1,"display-flex","align-items-center"],["autocorrect","on","animated","",3,"ngModelChange","ngModel"],[1,"track-count"],[1,"custom-content"],["itemSize","64","minBufferPx","960","maxBufferPx","1600",1,"cdk-vertical","ion-content-scroll-host"],["style","height: 64px",3,"ionDrag",4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTrackBy"],[1,"custom-footer"],[1,"display-flex","justify-content-space-around"],["fill","clear","slot","end",3,"click"],["slot","icon-only","name","settings-outline"],["slot","icon-only","name","refresh"],["slot","icon-only","name","funnel-outline"],[2,"position","absolute","right","-4px","top","-10px","font-size","11px"],["fill","clear",3,"click"],["slot","icon-only","name","swap-vertical"],["fill","clear"],[2,"height","64px",3,"ionDrag"],[1,"spotify-list-item"],[1,"track-view-count"],["slot","start"],[3,"src"],[1,"display-flex"],[1,"flex-basis-50","ellipsis"],[1,"flex-basis-50","ellipsis","m-l-5"],[1,"p-t-5"],["fill","clear","slot","end","color","medium",1,"more-options"],["justify","end","slot","end","mode","ios",3,"ngModel"],[1,"clip-path-badge","top-right","index-in-playlist"],["side","start",3,"ionSwipe"],["expandable","",3,"click"],["slot","icon-only",3,"name"],[1,"fs-7","wd-40","lh-10"],["side","end",3,"ionSwipe"],["fill","clear","slot","end","color","medium",1,"more-options",3,"click"],["slot","icon-only","name","ellipsis-vertical"],["justify","end","slot","end","mode","ios",3,"ngModelChange","ngModel"],["slot","icon-only","name","checkmark"],["slot","icon-only","name","menu"],["slot","icon-only","name","close"],["slot","icon-only","name","checkmark-done-circle"]],template:function(t,i){t&1&&(l(0,"ion-refresher",0),p("ionRefresh",function(){return i.loadTracks(!1,[])}),S(1,"ion-refresher-content"),a(),l(2,"div",1)(3,"div",2)(4,"ion-header")(5,"span",3)(6,"ion-searchbar",4),p("ngModelChange",function(r){return i.searchBy.set(r)}),a(),l(7,"span",5),d(8),a()()()(),l(9,"div",6)(10,"cdk-virtual-scroll-viewport",7)(11,"ion-list"),Ot(12,Hn,29,26,"ion-item-sliding",8),a()()(),l(13,"div",9)(14,"ion-footer")(15,"ion-toolbar")(16,"ion-buttons",10)(17,"ion-button",11),p("click",function(){return i.openSettingsModal()}),S(18,"ion-icon",12),a(),l(19,"ion-button",11),p("click",function(){return i.loadTracks(!0)}),S(20,"ion-icon",13),a(),l(21,"ion-button",11),p("click",function(){return i.openDropDownFilterModal()}),S(22,"ion-icon",14),l(23,"ion-badge",15),d(24),a()(),l(25,"ion-button",16),p("click",function(){return i.openSortAlert()}),S(26,"ion-icon",17),a(),M(27,Kn,2,0,"ion-button",18),M(28,Zn,2,0,"ion-button",18),M(29,qn,2,0,"ion-button",18),M(30,Qn,2,0,"ion-button",18),a()()()()()),t&2&&(s(6),f("ngModel",i.searchBy()),s(2),v(i.tracks().length),s(4),f("cdkVirtualForOf",i.tracks())("cdkVirtualForTrackBy",i.trackByItem),s(12),v(i.filterBadgeCount()),s(3),P(i.multiSelectMode()?-1:27),s(),P(i.multiSelectMode()?28:-1),s(),P(i.multiSelectMode()?29:-1),s(),P(i.multiSelectMode()?30:-1))},dependencies:[Ui,Gi,pt,W,A,z,ci,$,G,J,H,Z,nt,B,di,pi,mi,ot,X,hi,fi,rt,K,yi,le],styles:[Qi],changeDetection:0})}return ge([ut],n.prototype,"handleTrackOperation",null),ge([tt({keyName:qi,ttl:je})],n.prototype,"getSpotifySettings",null),ge([ut],n.prototype,"loadTracks",null),ge([tt({ttl:je}),Ye(0,ti),Ye(0,ei)],n.prototype,"getDefaultFilterCriteria",null),n})(),br=(()=>{class n{spotifyListComponent=Ht.required(ft);constructor(){q({add:Ci,copy:xi,download:Di,cloudUpload:bi})}openModal(e){this.spotifyListComponent()[e]()}openDuplicateSpotifyPlaylistModal(){this.openModal("openDuplicateSpotifyPlaylistModal")}openCreateSortedPlaylistModal(){this.openModal("openCreateSortedPlaylistModal")}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=x({type:n,selectors:[["spotify"]],viewQuery:function(t,i){t&1&&At(i.spotifyListComponent,ft,5),t&2&&zt()},decls:18,vars:2,consts:[["slot","start"],[3,"color"],["slot","end"],["title","Create Sorted Playlist","fill","clear",3,"click"],["slot","icon-only","name","add"],["title","Duplicate Playlist","fill","clear",3,"click"],["slot","icon-only","name","copy"],["title","Export All Tracks to CSV","fill","clear",3,"click"],["slot","icon-only","name","download"],["title","Upload CSV Folder to Log JSON","fill","clear",3,"click"],["slot","icon-only","name","cloud-upload"],["scrollbarThemeDirective","",2,"scroll-behavior","smooth"]],template:function(t,i){if(t&1&&(l(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),S(3,"ion-menu-button"),a(),l(4,"ion-title",1),d(5,"Spotify "),M(6,Yn,2,1,"small"),a(),l(7,"ion-buttons",2)(8,"ion-button",3),p("click",function(){return i.openCreateSortedPlaylistModal()}),S(9,"ion-icon",4),a(),l(10,"ion-button",5),p("click",function(){return i.openDuplicateSpotifyPlaylistModal()}),S(11,"ion-icon",6),a(),l(12,"ion-button",7),p("click",function(){return i.spotifyListComponent().spotifyDataService.exportAllTracksToCsvFile(i.spotifyListComponent().tracks())}),S(13,"ion-icon",8),a(),l(14,"ion-button",9),p("click",function(){return i.spotifyListComponent().spotifyDataService.saveSampledDataToCache()}),S(15,"ion-icon",10),a()()()(),l(16,"ion-content",11),S(17,"spotify-list-component"),a()),t&2){let o,r;s(4),f("color",(o=i.spotifyListComponent())!=null&&o.commandMatched()?"success":"danger"),s(2),P((r=i.spotifyListComponent())!=null&&r.commandText()?6:-1)}},dependencies:[$,G,Y,H,Z,ui,ee,K,ft],styles:[Qi]})}return n})();export{br as SpotifyPage};
