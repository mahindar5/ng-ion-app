import{$ as Se,F as Ce,U as ue,a as de,c as ge,ia as xe,z as me}from"./chunk-CSTODAPL.js";import{B as R,C as P,F,G as N,z as j}from"./chunk-AOXDPQU6.js";import{C as H,D as Q,J as X,K as Y,N as Z,P as $,V as ee,W as te,Y as ne,ca as ie,da as oe,ia as re,j as D,ja as se,m as J,p as U,qa as ae,ra as le,sa as ce,t as G,ta as _e,va as pe,x as z,y as q}from"./chunk-DG4AZ3SZ.js";import{$a as V,Aa as c,Ab as k,Bb as b,Cb as E,Eb as m,Fb as C,Gb as u,Ja as A,V as L,_ as I,_a as y,bb as T,bc as K,cb as w,da as s,db as h,ea as a,eb as x,fb as _,gb as l,hb as v,ka as O,kb as f,nb as p,ob as r,zb as g}from"./chunk-K2KEBQBS.js";import{a as M,b as W}from"./chunk-3GJFFWBB.js";var we=(o,d)=>d.name;function fe(o,d){if(o&1){let e=f();_(0,"ion-button",2),p("click",function(){s(e);let t=r();return a(t.resetSettings())}),g(1,"Reset"),l(),_(2,"ion-button",2),p("click",function(){s(e);let t=r();return a(t.router.navigate(["ai-dashboard/settings"]))}),g(3," Expand "),v(4,"ion-icon",3),l()}}function ye(o,d){if(o&1){let e=f();_(0,"ion-button",2),p("click",function(){s(e);let t=r();return a(t.settingsService.downloadSettings())}),v(1,"ion-icon",4),g(2," Download "),l(),_(3,"ion-button",2),p("click",function(){s(e);let t=r();return a(t.settingsService.selectAndValidateSettingsJsonFile())}),v(4,"ion-icon",5),g(5," Upload "),l(),_(6,"ion-button",2),p("click",function(){s(e);let t=r();return a(t.settingsService.saveSettings())}),g(7,"Save"),l(),_(8,"ion-button",2),p("click",function(){s(e);let t=r();return a(t.resetSettings())}),g(9,"Reset"),l()}}function Ve(o,d){if(o&1&&(_(0,"small",12),g(1),l()),o&2){let e=r().$implicit;c(),b("(",e.retryAfterDate,")")}}function ve(o,d){if(o&1&&(_(0,"ion-select-option",7),g(1),y(2,Ve,2,1,"small",12),l()),o&2){let e=d.$implicit;x("value",e)("disabled",e.disabled),c(),E(" ",e.org," -- ",e.name," "),c(),V(e.retryAfter&&e.disabled?2:-1)}}function Te(o,d){if(o&1&&(_(0,"ion-select-option",9),g(1),l()),o&2){let e=d.$implicit;x("value",e),c(),b(" ",e)}}function Me(o,d){if(o&1&&(_(0,"ion-select-option",9),g(1),l()),o&2){let e=d.$implicit;x("value",e),c(),k(e.name)}}function be(o,d){if(o&1){let e=f();_(0,"ion-item")(1,"ion-select",6),u("ngModelChange",function(t){s(e);let i=r();return C(i.settings().model,t)||(i.settings().model=t),a(t)}),p("ionChange",function(){s(e);let t=r();return a(t.settingsService.saveSettings())}),w(2,ve,3,5,"ion-select-option",7,T),l()(),_(4,"ion-item")(5,"ion-select",8),u("ngModelChange",function(t){s(e);let i=r();return C(i.settings().processingStrategy,t)||(i.settings().processingStrategy=t),a(t)}),p("ionChange",function(){s(e);let t=r();return a(t.settingsService.saveSettings())}),w(6,Te,2,2,"ion-select-option",9,T),l()(),_(8,"ion-item")(9,"ion-input",10),u("ngModelChange",function(t){s(e);let i=r();return C(i.settings().maxOutputTokens,t)||(i.settings().maxOutputTokens=t),a(t)}),p("ionChange",function(){s(e);let t=r();return a(t.settingsService.saveSettings())}),l()(),_(10,"ion-item")(11,"ion-select",11),u("ngModelChange",function(t){s(e);let i=r();return C(i.settings().selectedPrompt,t)||(i.settings().selectedPrompt=t),a(t)}),p("ionChange",function(){s(e);let t=r();return a(t.onPromptChange())}),w(12,Me,2,2,"ion-select-option",9,we),l()()}if(o&2){let e=r();c(),m("ngModel",e.settings().model),x("compareWith",e.compareModels),c(),h(e.settings().models),c(3),m("ngModel",e.settings().processingStrategy),c(),h(e.processingStrategies),c(3),m("ngModel",e.settings().maxOutputTokens),c(2),m("ngModel",e.settings().selectedPrompt),x("compareWith",e.comparePrompts),c(),h(e.settings().prompts)}}function Ie(o,d){if(o&1&&(_(0,"small",12),g(1),l()),o&2){let e=r().$implicit;c(),b("(",e.retryAfterDate,")")}}function ke(o,d){if(o&1&&(_(0,"ion-select-option",7),g(1),y(2,Ie,2,1,"small",12),l()),o&2){let e=d.$implicit;x("value",e)("disabled",e.disabled),c(),E(" ",e.org," -- ",e.name," "),c(),V(e.retryAfter&&e.disabled?2:-1)}}function Pe(o,d){if(o&1&&(_(0,"ion-select-option",9),g(1),l()),o&2){let e=d.$implicit;x("value",e),c(),b(" ",e)}}function We(o,d){if(o&1&&(_(0,"ion-select-option",9),g(1),l()),o&2){let e=d.$implicit;x("value",e),c(),k(e.name)}}function Ee(o,d){if(o&1){let e=f();_(0,"ion-button",24),p("click",function(t){s(e);let i=r().$implicit,S=r(2);return a(S.settingsService.addPrompt(i,t))}),v(1,"ion-icon",25),l()}}function Fe(o,d){if(o&1){let e=f();_(0,"ion-item")(1,"ion-checkbox",28),u("ngModelChange",function(t){let i=s(e).$implicit;return C(i.selected,t)||(i.selected=t),a(t)}),p("ionChange",function(){s(e);let t=r(4);return a(t.settingsService.saveSettings())}),l(),_(2,"ion-input",29),u("ngModelChange",function(t){let i=s(e).$implicit;return C(i.text,t)||(i.text=t),a(t)}),p("ionInput",function(){s(e);let t=r(4);return a(t.settingsService.saveSettings())}),l(),_(3,"ion-button",30),p("click",function(){let t=s(e).$index,i=r(2).$implicit,S=r(2);return a(S.settingsService.removePrompt(i,t))}),v(4,"ion-icon",31),l()()}if(o&2){let e=d.$implicit;c(),m("ngModel",e.selected),c(),m("ngModel",e.text)}}function Be(o,d){if(o&1){let e=f();_(0,"div",23)(1,"ion-list")(2,"ion-item")(3,"ion-input",26),u("ngModelChange",function(t){s(e);let i=r().$implicit;return C(i.name,t)||(i.name=t),a(t)}),p("ionInput",function(){s(e);let t=r(3);return a(t.settingsService.saveSettings())}),l()(),_(4,"ion-item")(5,"ion-input",27),u("ngModelChange",function(t){s(e);let i=r().$implicit;return C(i.role,t)||(i.role=t),a(t)}),p("ionInput",function(){s(e);let t=r(3);return a(t.settingsService.saveSettings())}),l()(),w(6,Fe,5,2,"ion-item",null,T),l()()}if(o&2){let e=r().$implicit;c(3),m("ngModel",e.name),c(2),m("ngModel",e.role),c(),h(e.promptTextList)}}function Le(o,d){if(o&1){let e=f();_(0,"ion-accordion",9)(1,"ion-item",19)(2,"ion-label"),g(3),l(),y(4,Ee,2,0,"ion-button",20),_(5,"ion-button",21),p("click",function(){let t=s(e).$implicit,i=r(2);return a(i.settingsService.removePromptItem(t.name))}),v(6,"ion-icon",22),l()(),y(7,Be,8,2,"div",23),l()}if(o&2){let e=d.$implicit,n=r(2);x("value",e.name),c(3),k(e.name),c(),V(n.expandedAccordion==e.name?4:-1),c(3),V(n.expandedAccordion==e.name?7:-1)}}function Oe(o,d){if(o&1){let e=f();_(0,"ion-row")(1,"ion-col")(2,"ion-item")(3,"ion-range",13),u("ngModelChange",function(t){s(e);let i=r();return C(i.settings().temperature,t)||(i.settings().temperature=t),a(t)}),p("ionChange",function(){s(e);let t=r();return a(t.settingsService.saveSettings())}),l()()(),_(4,"ion-col")(5,"ion-item")(6,"ion-range",14),u("ngModelChange",function(t){s(e);let i=r();return C(i.settings().topP,t)||(i.settings().topP=t),a(t)}),p("ionChange",function(){s(e);let t=r();return a(t.settingsService.saveSettings())}),l()()(),_(7,"ion-col")(8,"ion-item")(9,"ion-range",15),u("ngModelChange",function(t){s(e);let i=r();return C(i.settings().n,t)||(i.settings().n=t),a(t)}),p("ionChange",function(){s(e);let t=r();return a(t.settingsService.saveSettings())}),l()()()(),_(10,"ion-row")(11,"ion-col")(12,"ion-item")(13,"ion-select",6),u("ngModelChange",function(t){s(e);let i=r();return C(i.settings().model,t)||(i.settings().model=t),a(t)}),p("ionChange",function(){s(e);let t=r();return a(t.settingsService.saveSettings())}),w(14,ke,3,5,"ion-select-option",7,T),l()()(),_(16,"ion-col")(17,"ion-item")(18,"ion-select",8),u("ngModelChange",function(t){s(e);let i=r();return C(i.settings().processingStrategy,t)||(i.settings().processingStrategy=t),a(t)}),p("ionChange",function(){s(e);let t=r();return a(t.settingsService.saveSettings())}),w(19,Pe,2,2,"ion-select-option",9,T),l()()(),_(21,"ion-col")(22,"ion-item")(23,"ion-input",10),u("ngModelChange",function(t){s(e);let i=r();return C(i.settings().maxOutputTokens,t)||(i.settings().maxOutputTokens=t),a(t)}),p("ionChange",function(){s(e);let t=r();return a(t.settingsService.saveSettings())}),l()()()(),_(24,"ion-row")(25,"ion-col")(26,"ion-item")(27,"ion-select",11),u("ngModelChange",function(t){s(e);let i=r();return C(i.settings().selectedPrompt,t)||(i.settings().selectedPrompt=t),a(t)}),p("ionChange",function(){s(e);let t=r();return a(t.onPromptChange())}),w(28,We,2,2,"ion-select-option",9,we),l()()(),_(30,"ion-col")(31,"ion-item")(32,"ion-input",16),u("ngModelChange",function(t){s(e);let i=r();return C(i.settings().apiKeys.google,t)||(i.settings().apiKeys.google=t),a(t)}),p("ionInput",function(){s(e);let t=r();return a(t.settingsService.saveSettings())}),l()()(),_(33,"ion-col")(34,"ion-item")(35,"ion-input",17),u("ngModelChange",function(t){s(e);let i=r();return C(i.settings().apiKeys.github,t)||(i.settings().apiKeys.github=t),a(t)}),p("ionInput",function(){s(e);let t=r();return a(t.settingsService.saveSettings())}),l()()()(),_(36,"ion-item")(37,"ion-button",2),p("click",function(){s(e);let t=r();return a(t.settingsService.addPromptItem())}),g(38,"Add Role"),l()(),_(39,"ion-accordion-group",18),p("ionChange",function(t){s(e);let i=r();return a(i.expandedAccordion=t.detail.value)}),w(40,Le,8,4,"ion-accordion",9,T),l()}if(o&2){let e=r();c(3),m("ngModel",e.settings().temperature),c(3),m("ngModel",e.settings().topP),c(3),m("ngModel",e.settings().n),c(4),m("ngModel",e.settings().model),x("compareWith",e.compareModels),c(),h(e.settings().models),c(4),m("ngModel",e.settings().processingStrategy),c(),h(e.processingStrategies),c(4),m("ngModel",e.settings().maxOutputTokens),c(4),m("ngModel",e.settings().selectedPrompt),x("compareWith",e.comparePrompts),c(),h(e.settings().prompts),c(4),m("ngModel",e.settings().apiKeys.google),c(3),m("ngModel",e.settings().apiKeys.github),c(5),h(e.settings().prompts)}}var Ae=(()=>{class o{defaultSettings={temperature:1,topP:.95,topK:64,n:1,model:{name:"gemini-exp-1206",org:N.Gemini},selectedPrompt:P.find(e=>e.name==R)||P[0],prompts:P,models:[],apiKeys:{github:"",google:""},maxOutputTokens:8192*4,processingStrategy:F.Combined,sideBarOpen:{aiAgent:!0,aiChat:!0}};settings=O(this.defaultSettings);aiservice=I(j);constructor(){this.loadSettings()}loadSettings(){let e=localStorage.getItem("settings");if(e){let n=JSON.parse(e);for(let t of Object.keys(this.defaultSettings))t in n||(n[t]=this.defaultSettings[t]);this.defaultSettings.apiKeys=M(M({},this.defaultSettings.apiKeys),n.apiKeys),this.settings.set(n)}else this.settings.set(this.defaultSettings);this.initializeModels()}saveSettings(e){e=e??this.settings(),this.settings.update(()=>M({},e)),localStorage.setItem("settings",JSON.stringify(e))}resetSettings(){this.settings.set(this.defaultSettings),this.initializeModels()}addPrompt(e,n){n?.stopPropagation();let t=this.settings(),i=t.prompts.find(S=>S.name===e.name);if(!i)throw new Error("Prompt not found");i.promptTextList.push({text:"",selected:!1}),this.saveSettings(t)}removePrompt(e,n){let t=this.settings(),i=t.prompts.find(S=>S.name===e.name);if(!i)throw new Error("Prompt not found");i.promptTextList.splice(n,1),this.saveSettings(t)}addPromptItem(){let e=this.settings(),n=`New Prompt ${e.prompts.length+1}`;e.prompts.push({name:n,promptTextList:[],role:""}),this.saveSettings(e)}removePromptItem(e){let n=this.settings(),t=n.prompts.findIndex(i=>i.name===e);if(t===-1)throw new Error("Prompt not found");n.prompts.splice(t,1),this.saveSettings(n)}initializeModels(){let e=this.settings(),n=this.aiservice.loadModels(e);this.saveSettings(W(M({},e),{models:n}))}downloadSettings(){let e=this.settings(),n=JSON.stringify(e,null,2),t=new Blob([n],{type:"application/json"}),i=window.URL.createObjectURL(t),S=document.createElement("a");S.href=i,S.download="settings.json",S.click(),window.URL.revokeObjectURL(i)}async selectAndValidateSettingsJsonFile(){let e=["temperature","topP","topK","n","model","selectedPrompt","prompts","models","apiKeys","maxOutputTokens","processingStrategy"],[n]=await window.showOpenFilePicker({multiple:!1,id:"settingsjson",types:[{description:"JSON Files",accept:{"application/json":[".json"]}}]}),i=await(await n.getFile()).text(),S=JSON.parse(i),B=e.filter(he=>!(he in S));if(B.length>0){console.error("File content is missing required keys:"+B.join(", "));return}this.saveSettings(S)}static \u0275fac=function(n){return new(n||o)};static \u0275prov=L({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})(),Qe=(()=>{class o{processingStrategies=Object.values(F);settingsService=I(Ae);router=I(D);isCompactView=K(!1);settings=this.settingsService.settings;expandedAccordion="";constructor(){de({addCircle:ge,removeCircle:Se,openOutline:ue,downloadOutline:Ce,cloudUploadOutline:me,trash:xe})}compareModels(e,n){return e.name===n.name&&e.org===n.org}comparePrompts(e,n){return e.name===n.name}onPromptChange(){let e=this.settings();this.settingsService.saveSettings(W(M({},e),{selectedPrompt:e.selectedPrompt}))}resetSettings(){this.settingsService.resetSettings()}static \u0275fac=function(n){return new(n||o)};static \u0275cmp=A({type:o,selectors:[["app-settings"]],inputs:{isCompactView:[1,"isCompactView"]},decls:13,vars:3,consts:[["slot","start"],["slot","end"],[3,"click"],["slot","end","name","open-outline"],["slot","start","name","download-outline"],["slot","start","name","cloud-upload-outline"],["label","Model","label-placement","stacked","interface","popover",3,"ngModelChange","ionChange","ngModel","compareWith"],[3,"value","disabled"],["label","Processing Strategy","label-placement","stacked","interface","popover",3,"ngModelChange","ionChange","ngModel"],[3,"value"],["label","Max Output Tokens","type","number","label-placement","stacked",3,"ngModelChange","ionChange","ngModel"],["label","Role","label-placement","stacked","interface","popover",3,"ngModelChange","ionChange","ngModel","compareWith"],[1,"m-l-10"],["label","Temperature","label-placement","stacked","min","0","max","1","step","0.01",3,"ngModelChange","ionChange","ngModel"],["label","Top P","label-placement","stacked","min","0","max","1","step","0.01",3,"ngModelChange","ionChange","ngModel"],["label","N","label-placement","stacked","min","1","max","100","step","1",3,"ngModelChange","ionChange","ngModel"],["label","Google API Key","label-placement","stacked","placeholder","Enter Google API Key",3,"ngModelChange","ionInput","ngModel"],["label","Github PAT Token","label-placement","stacked","placeholder","Enter Github PAT Token",3,"ngModelChange","ionInput","ngModel"],[3,"ionChange"],["slot","header"],["title","Add","slot","end","fill","clear"],["slot","end","fill","clear",3,"click"],["slot","icon-only","name","trash"],["slot","content",1,"ion-padding"],["title","Add","slot","end","fill","clear",3,"click"],["name","add-circle"],["label","Name","label-placement","stacked","placeholder","Enter name",3,"ngModelChange","ionInput","ngModel"],["label","Role","label-placement","stacked","placeholder","Enter role",3,"ngModelChange","ionInput","ngModel"],["slot","start",3,"ngModelChange","ionChange","ngModel"],["placeholder","Enter prompt",3,"ngModelChange","ionInput","ngModel"],["title","Remove","slot","end","color","danger","fill","clear",3,"click"],["name","remove-circle"]],template:function(n,t){n&1&&(_(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),v(3,"ion-menu-button"),l(),_(4,"ion-title"),g(5,"Settings"),l(),_(6,"ion-buttons",1),y(7,fe,5,0)(8,ye,10,0),l()()(),_(9,"ion-content")(10,"ion-list"),y(11,be,14,6),y(12,Oe,42,11),l()()),n&2&&(c(7),V(t.isCompactView()?7:8),c(4),V(t.isCompactView()?11:-1),c(),V(t.isCompactView()?-1:12))},dependencies:[G,J,U,ne,H,Q,ie,X,te,le,z,q,ae,Y,Z,ce,$,ee,_e,pe,oe,re,se],encapsulation:2})}return o})();export{Ae as a,Qe as b};
